/*from tccdn minify at 2016-11-6 1:09:30,file：/touch/public/calendar/0.0.5/calendar.js*/
!function(){function s(b){return b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0),b}function t(b){return"string"==typeof b&&""!==b}function u(a){if(this.today=s(new Date),this.dateVerify=function(){return !0},$.extend(this,a),v.call(this),x.call(this),this.tips||(this.tips=["请选择起始时间","请选择结束时间"]),this.rangeTxt||(this.rangeTxt=["开始","结束"]),this.rangeStyled=this.rangeStyled||!1,!this.wrapper){var d=(this.name||"calendar")+"Page",f=this.title||"选择日期";this.wrapper=$("#"+d),this.wrapper.length?(F&&$(".page-header h2",this.wrapper).html(f),$(".calendar",this.wrapper).remove()):($("body").append('<div id="'+d+'" class="page">'+(F?'<div class="page-header"><a class="page-back" href="javascript:void(0);"></a><h2>'+f+"</h2></div>":"")+"</div>"),this.wrapper=$("#"+d))}y.call(this),E.call(this)}function v(){w(this,["startDate","endDate"]),this.currentDate?w(this.currentDate,[0,1]):this.currentDate=[]}function w(a,b){for(var h,i=0,j=b.length;j>i;i++){h=b[i],t(a[h])?a[h]=Date.ParseString(a[h]):a[h] instanceof Date?s(a[h]):a[h]=void 0}}function x(){if(this.startDate||(this.startDate=this.today),!this.endDate){var b=new Date(this.today);b.setMonth(b.getMonth()+6),b.setDate(b.getDate()-1),this.endDate=b}}function y(){var f,g,h='<div class="calendar">';if(this.ajaxObj?(G=0,H=[],I=0,f=z):f=function(b){h+=A.call(this,b)},this.reverseOrder){g=new Date(this.endDate),g.setDate(1);var i=new Date(this.startDate);for(i.setDate(1);g.getTime()>=i;){f.call(this,new Date(g),G++),g.setMonth(g.getMonth()-1)}}else{for(g=new Date(this.startDate),g.setDate(1);g.getTime()<=this.endDate;){f.call(this,new Date(g),G++),g.setMonth(g.getMonth()+(this.growInterval||1))}}if("range"===this.mode){h+='<div class="calendar-tips">'+this.tips[0]+"</div>";var j=this;setTimeout(function(){var d=$(window),e=(d.width()-200)/2,k=d.height()-$(".calendar-tips",j.wrapper).height()-10;$(".calendar-tips",j.wrapper).css({right:e,top:k})},120)}h+="</div>",this.wrapper.append(h),D.call(this)}function z(f,g){var h=$.extend({},this.ajaxObj),i=this,j=f.getMonth()+1;h.url=h.url.replace("{year}",f.getFullYear()).replace("{month}",(10>j?"0":"")+j).replace("{growInterval}",i.growInterval||1),i.ajaxObj.beforeSend&&(h.beforeSend=function(a,d){i.ajaxObj.beforeSend(a,d,f)}),h.success=function(a){i.ajaxObj.success&&(a=i.ajaxObj.success(a)),H[g]=H[g]||"";for(var b=(i.growInterval||1)-1;b>=0;b--){H[g]+=A.call(i,f,a),f.setDate(1)}I++,I===G&&$(".calendar",i.elem).html(H.join(""))},$.ajax(h)}function A(g,h){for(var i=g.getMonth(),j=new Date(g),k='<div class="calendar-wrapper" data-year="'+g.getFullYear()+'" data-month="'+(g.getMonth()+1)+'"><h3>'+g.getFullYear()+"年"+(g.getMonth()+1)+'月</h3><table><tr><th class="sunday">日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th class="saturday">六</th></tr><tr>';0!==j.getDay();){j.setDate(j.getDate()-1),k+='<td class="disabled"></td>'}var l=this.startDate;for("rangeTo"===this.mode&&this.currentDate[0]&&this.currentDate[0].getTime()>this.startDate.getTime()&&(l=this.currentDate[0]);g.getMonth()===i;){k+=B.call(this,g,l,h),g.setDate(g.getDate()+1),0===g.getDay()&&g.getMonth()===i&&(k+="</tr><tr>")}for(;0!==g.getDay();){k+='<td class="disabled"></td>',g.setDate(g.getDate()+1)}return k+="</tr></table></div>"}function B(k,l,m){var n=[];0===k.getDay()?n.push("sunday"):6===k.getDay()&&n.push("saturday"),(k.getTime()<l.getTime()||k.getTime()>this.endDate.getTime())&&n.push("disabled");var o,p,q=C(k);if(q?(o=q,p="festival"):k.getTime()===this.today.getTime()&&(o="今天",p="today"),p&&n.push(p),this.currentDate){var r=this.currentDate[0],K=this.currentDate[1];r&&(k.getTime()===r.getTime()?n.push("from-day"):k.getTime()>r.getTime()&&K&&k.getTime()<K.getTime()&&n.push("range-day")),K&&K.getTime()===k.getTime()&&n.push("to-day")}var L;return L=this.buildContent?this.buildContent(k,o,n,m):o?o:k.getDate(),"<td"+(n.length?' class="'+n.join(" ")+'"':"")+' data-day="'+k.getDate()+'"><div>'+L+"</div></td>"}function C(f){var g=f.getFullYear(),h=f.getMonth()+1,i=f.getDate(),j=J[g+"-"+h+"-"+i];return j?j:(1===h&&1===i?j="元旦":2===h&&14===i?j="情人":5===h&&1===i?j="五一":6===h&&1===i?j="儿童":10===h&&1===i?j="国庆":12===h&&25===i&&(j="圣诞"),j)}function D(){if(this.rangeStyled&&"range"===this.mode){this.wrapper.addClass("range-styled");var h=$(".from-day",this.wrapper),i=$(".to-day",this.wrapper),j='<span class="range-blank"></span>',k=$("td",this.wrapper),l=k.indexOf(h[0]),m=k.indexOf(i[0]),n=[];n=k.slice(l+1,m),$(n).addClass("range-day"),$(".disabled",this.wrapper).removeClass("range-day"),$(".range-day > div > *",this.wrapper).addClass("range-in"),$(".range-from",this.wrapper)[0]||$(".from-day > div > *",this.wrapper).addClass("range-from"),$(".from-day > div .range-txt")[0]||$(".from-day > div").append('<span class="range-txt">'+this.rangeTxt[0]+"</span>"),$(".range-to",this.wrapper)[0]||(h.hasClass("to-day")?$(".range-txt",h).html(this.rangeTxt[0]+"+"+this.rangeTxt[1]):$(".to-day > div > *",this.wrapper).addClass("range-to")),$(".to-day > div .range-txt")[0]||$(".to-day > div").append('<span class="range-txt">'+this.rangeTxt[1]+"</span>"),h.next().hasClass("range-day")&&$(".range-from",h).before(j),i.prev().hasClass("range-day")&&$(".range-to",i).before(j),i.prev().hasClass("from-day")&&($(".range-from",h).before(j),$(".range-to",i).before(j))}}function E(){var e=this;if("range"===e.mode){var f,g=!0,h=[];$(".calendar",e.wrapper).delegate("td","click",function(a){var b=$(this);if(!b.hasClass("disabled")){var c=b.parents(".calendar-wrapper");if(f=[c.attr("data-year"),c.attr("data-month"),b.attr("data-day")],g){for(var d,l=["from-day","range-day","to-day"],q=0;d=l[q++];){$("."+d,e.wrapper).removeClass(d)}if(b.addClass("from-day"),e.rangeStyled){var r={"range-from":"true","range-to":"true","range-in":"true"};$(".range-blank, .range-txt",e.wrapper).remove();for(var K in r){$("."+K,e.wrapper).removeClass(K)}$(".from-day > div > *").addClass("range-from"),$(".from-day > div .range-txt")[0]||$(".from-day > div").append('<span class="range-txt">'+e.rangeTxt[0]+"</span>")}$(".calendar-tips",e.wrapper).remove();var L=$(window),M=(L.width()-200)/2,N='<div class="calendar-tips">'+e.tips[1]+"</div>";$(".calendar",e.wrapper).append(N),setTimeout(function(){var i=L.height()-$(".calendar-tips",e.wrapper).height()-10;$(".calendar-tips",e.wrapper).css({right:M,top:i})},100),h[0]=f,g=!1}else{if(h[1]=f,e.rangeStyled){if(!e.dateVerify(h)){return g=!1,h[0]=f,$(".from-day",e.wrapper).removeClass("from-day"),$(".range-from",e.wrapper).removeClass("range-from"),$(".range-txt",e.wrapper).remove(),b.addClass("from-day"),$(".from-day > div > *").addClass("range-from"),void ($(".from-day > div .range-txt")[0]||$(".from-day > div").append('<span class="range-txt">'+e.rangeTxt[0]+"</span>"))}b.addClass("to-day"),b.hasClass("from-day")?$(".range-txt",b).html(e.rangeTxt[0]+"+"+e.rangeTxt[1]):($(".to-day > div > *").addClass("range-to"),$(".to-day > div .range-txt")[0]||$(".to-day > div").append('<span class="range-txt">'+e.rangeTxt[1]+"</span>")),D.call(e)}e.fn(h),g=!0}}})}else{$(".calendar",e.wrapper).delegate("td","click",function(a){var i=$(this);if(!i.hasClass("disabled")&&"function"==typeof e.fn){var j=i.parents(".calendar-wrapper");e.fn([j.attr("data-year"),j.attr("data-month"),i.attr("data-day")],i)}})}}var F=-1===navigator.userAgent.toLowerCase().indexOf("tctravel");Date.ParseString=function(f){var g=/(\d{4})-(\d{1,2})-(\d{1,2})(?:\s+(\d{1,2}):(\d{1,2}):(\d{1,2}))?/i,h=g.exec(f),i=0,j=null;return i=h&&h.length?h.length>5&&h[6]?Date.parse(f.replace(g,"$2/$3/$1 $4:$5:$6")):Date.parse(f.replace(g,"$2/$3/$1")):Date.parse(f),isNaN(i)||(j=new Date(i)),j},$.calendar=function(b){return new u(b)};var G,H,I,J={"2014-1-30":"除夕","2014-1-31":"春节","2014-2-14":"元宵","2014-4-5":"清明","2014-6-2":"端午","2014-8-2":"七夕","2014-9-8":"中秋","2014-10-2":"重阳","2015-2-18":"除夕","2015-2-19":"春节","2015-3-5":"元宵","2015-4-5":"清明","2015-6-20":"端午","2015-8-20":"七夕","2015-9-27":"中秋","2015-10-21":"重阳","2016-2-7":"除夕","2016-2-8":"春节","2016-2-22":"元宵","2016-4-4":"清明","2016-6-9":"端午","2016-8-9":"七夕","2016-9-15":"中秋","2016-10-9":"重阳","2017-1-27":"除夕","2017-1-28":"春节","2017-2-11":"元宵","2017-4-4":"清明","2017-5-30":"端午","2017-8-28":"七夕","2017-10-4":"中秋","2017-10-28":"重阳","2018-2-15":"除夕","2018-2-16":"春节","2018-3-2":"元宵","2018-4-5":"清明","2018-6-18":"端午","2018-8-17":"七夕","2018-9-24":"中秋","2018-10-17":"重阳","2019-2-4":"除夕","2019-2-5":"春节","2019-2-19":"元宵","2019-4-5":"清明","2019-6-7":"端午","2019-8-7":"七夕","2019-9-13":"中秋","2019-10-7":"重阳","2020-1-24":"除夕","2020-1-25":"春节","2020-2-8":"元宵","2020-4-4":"清明","2020-6-25":"端午","2020-8-25":"七夕","2020-10-1":"中秋","2020-10-25":"重阳"}}();
Date.prototype.format=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(t in i)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length==1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return n};var DateConvert=function(n){var t=n.replace(" ","-").replace(":","-").split("-"),i={Year:function(){return t[0]?t[0]:0},Month:function(){return t[1]?t[1]-1:0},Day:function(){return t[2]?t[2]:0},Hour:function(){return t[3]?t[3]:0},Minutes:function(){return t[4]?t[4]:0},Seconds:function(){return t[5]?t[5]:0}};return new Date(i.Year(),i.Month(),i.Day(),i.Hour(),i.Minutes(),i.Seconds())},BasicData={CheckType:function(n){if(n||n===0)$.cookie("check-type-data",n,{path:"/"});else return n=$.cookie("check-type-data")?$.cookie("check-type-data"):"0",n==2?$("#SpecialCheckType").val()==1?n:"0":n},City:function(n){if(n)$.cookie("city-data",JSON.stringify(n),{path:"/"}),$.removeCookie("keyword-data");else return $.cookie("city-data")?n=JSON.parse($.cookie("city-data")):(n={CityCode:"110100",CityName:"北京市"},$.cookie("city-data",JSON.stringify(n),{path:"/"})),n},Date:function(n){var t,i;if(n)$.cookie("date-data",JSON.stringify(n),{path:"/"});else return moment().hour()<6?(t=moment().add(-1,"d").format("YYYY-MM-DD"),i=moment().format("YYYY-MM-DD"),$.cookie("date-data")?(n=JSON.parse($.cookie("date-data")),n.ArrDate<t&&(n={ArrDate:t,OutDate:i})):n={ArrDate:t,OutDate:i}):(t=moment().format("YYYY-MM-DD"),i=moment().add(1,"d").format("YYYY-MM-DD"),$.cookie("date-data")?(n=JSON.parse($.cookie("date-data")),n.ArrDate<t&&(n={ArrDate:t,OutDate:i})):n={ArrDate:t,OutDate:i}),n},Keyword:function(n){if(n)$.cookie("keyword-data",JSON.stringify(n),{path:"/"});else return $.cookie("keyword-data")?(n=JSON.parse($.cookie("keyword-data")),n.CityCode!=this.City().CityCode&&(n={CityCode:"",KeyType:"None",KeyCode:"",KeyName:"",Longitude:"",Latitude:""})):n={CityCode:"",KeyType:"None",KeyCode:"",KeyName:"",Longitude:"",Latitude:""},n},Location:function(n){if(n)$.cookie("location-data",JSON.stringify(n),{path:"/"});else return $.cookie("location-data")?JSON.parse($.cookie("location-data")):undefined},BreakfastType:function(n){switch(n){case 1:return"单早";case 2:return"双早";case 3:return"三早";case 4:return"含早";default:return"无早"}},DateTag:function(n){var t=new Date,i,r;t=new Date(t.getFullYear(),t.getMonth(),t.getDate());currentDate=new Date(n);i=parseInt((currentDate.getTime()-t.getTime())/864e5);r=["周日","周一","周二","周三","周四","周五","周六"];switch(i){case 0:return"今天";case 1:return"明天";case 2:return"后天";default:return r[currentDate.getDay()]}},CalcTotalDays:function(){var n=new Date(BasicData.Date().ArrDate),t=new Date(BasicData.Date().OutDate);return(t.getTime()-n.getTime())/864e5},Binding:function(){$(".sba_tabwrap .sba_tab li").removeClass("cur");$('.sba_tabwrap .sba_tab li[data-check-type="'+this.CheckType()+'"]').addClass("cur");var n=$('.sba_tabwrap .sba_tab li[data-check-type="'+this.CheckType()+'"]').index();$(".sba_conwrap .sba_con").eq(n).show().siblings().hide();BuildCheckinHtml.BuildList();BuildCheckinHtml.BuildDetails();$(".city-name").html(this.City().CityName);$("#CityCode").val(this.City().CityCode);$(".arrdate").html(new Date(this.Date().ArrDate).format($(".arrdate").data("format")==undefined?"MM月dd日":$(".arrdate").data("format")));$("#ArrDate").val(this.Date().ArrDate);$(".arrdatetag").html(this.DateTag(this.Date().ArrDate));$(".outdate").html(new Date(this.Date().OutDate).format($(".outdate").data("format")==undefined?"MM月dd日":$(".outdate").data("format")));$("#OutDate").val(this.Date().OutDate);$(".outdatetag").html(this.DateTag(this.Date().OutDate));$(".totaldays").html($(".totaldays").data("format")==undefined?"共"+this.CalcTotalDays()+"晚":this.CalcTotalDays()+"晚");this.Keyword().KeyName!=""?($(".keyword").html(this.Keyword().KeyName),$(".keyword").removeClass("gjcwn").addClass("gjcwn1")):($(".keyword").html($(".keyword").data("default")),$(".keyword").removeClass("gjcwn1").addClass("gjcwn"))},EnumsFlags:function(n,t){var i="";for(var r in n)(t&n[r])==n[r]&&(i+=r+",");return i.length>0&&(i=i.substring(0,i.length-1)),i},CommentTag:function(n){switch(n){case 1:return"非常满意";case 2:return"满意";case 3:return"一般";case 4:return"不满意";case 5:return"非常不满意"}}},EnumsData={EnumName:function(n,t){for(var i in n)if(n[i]==t)return i},OrderStatus:{"等候":1,"预订":5,"在住":10,"未到":15,"离店":20,"取消":25,"归档":30},OrderChannel:{"手机H5":40,"微信公众账号":50,"手机AppiPhone":51,"手机AppAndroid":52},PayType:{"前台现付":1,"预付":3,"担保":4},DeductCost:{"首晚":1,"全额":3},RoomConfig:{"电脑":1,"冰箱":2,"浴缸":4},SpecialDesc:{"暗窗":1,"廊窗":2,"无窗":4,"半地下":8,"地下":16,"无烟房":32},CouponState:{"制作":1,"出库":2,"绑定":3,"使用":4,"过期":5,"作废":6},DiscountPriceType:{"团购价":1024,"今日特惠":4096},MallConfig:{"手机号码":1,"确认手机号":2,"联系电话":16}},BuildCheckinHtml={BuildList:function(){var n="";n=BasicData.CheckType()==0?'<span class="imgbcg fjlb_ico02"><img src="/images/icon_02.png"><\/span><span class="dayi_a arrdate"><\/span><i class="dayi_b">入住<\/i><span class="dayi_a outdate"><\/span><i class="dayi_b">离店<\/i><span class="dayi_a totaldays"><\/span><span class="fjlb_dot01 imgbcg"><img src="/images/dot_02_03.png"><\/span>':'<span class="imgbcg fjlb_ico02"><img src="/images/icon_02.png"><\/span><span class="dayi_a arrdate"><\/span><i class="dayi_b">入住<\/i><span class="fjlb_dot01 imgbcg"><img src="/images/dot_02_03.png"><\/span>';$(".list-checkin-date").html(n)},BuildDetails:function(){var n="";n=BasicData.CheckType()==0?'<div class="jdxq_tit_l"><div class="zngd01"><span class="zngd01_k01"><img src="/images/icon_02.png"><\/span><span class="zngd01_k02">入住<i class="arrdate"><\/i><\/span><span class="zngd01_k03">（<i class="arrdatetag"><\/i>）<\/span><\/div><div class="zngd01 zngd09"><span class="zngd01_k04"><\/span><span class="zngd01_k02">离店<i class="outdate"><\/i><\/span><span class="zngd01_k03">（<i class="outdatetag"><\/i>）<\/span><\/div><div class="zngd03 totaldays"><\/div><\/div><div class="jdxq_tit_r jdxq_wx_r"><p class="jdtir_dot"><img src="/images/dot_02_03.png"><\/p><\/div>':'<div class="jdxq_tit_l"><div class="zngd01"><span class="zngd01_k01"><img src="/images/icon_02.png"><\/span><span class="zngd01_k02">入住<i class="arrdate"><\/i><\/span><span class="zngd01_k03">（<i class="arrdatetag"><\/i>）<\/span><\/div><\/div><div class="jdxq_tit_r jdxq_wx_r"><p class="jdtir_dot"><img src="/images/dot_02_03.png"><\/p><\/div>';$(".details-checkin-date").html(n)}},SendSMSVerifyCode={Send:function(n,t,i){function u(){if(r==0){$("#SendSMSCode").removeAttr("disabled").val("获取验证码");$("#SendSMSCode").removeAttr("disabled").html("获取验证码");$(".image-code img").attr("src","/General/ImageVerifyCode?r="+Math.random());r=60;return}$("#SendSMSCode").attr("disabled","true").val(r+"秒再获取");$("#SendSMSCode").attr("disabled","true").html(r+"秒再获取");r--;setTimeout(function(){u()},1e3)}var r=60;$.ajax({method:"GET",async:!1,data:{phoneNum:n,verifyType:i,imageCode:t},url:"/General/SMSVerifyCode?r="+Math.random(),dataType:"json",success:function(n){n.Success?(u(),ajaxresult=!0):(n.Message=="您的操作过于频繁，请输入图形验证码"&&($(".show-image-code").removeClass("hide"),$(".show-image-code").show()),showTip(n.Message),ajaxresult=!1,$(".image-code img").attr("src","/General/ImageVerifyCode?r="+Math.random()))}})}},Common={DisableTouchMove:function(n){document.addEventListener("touchmove",function(){n},!1)},Loading:function(){$("body").css("overflow","hidden");$(".loading").show()},Loaded:function(){$("body").css("overflow","");$(".loading").hide()},Message:function(n){var t=$('<div class="message"><\/div>');$("body").append(t);t.html(n).delay(400).show(0).delay(2e3).hide(0,function(){t.empty()})},ShowMessage:function(n,t,i){function u(){r.remove()}var r=$(".message-container");r.html()||(r=$('<div class="message-container"><div class="message-group"><div class="message"><\/div><\/div><\/div>'),$("body").append(r));$(".message",r).html(n);t!=""&&$(".message",r).css("text-align",t);i||setTimeout(u,2e3)},RemoveMessage:function(){$(".message-container").remove()}};$(function(){BasicData.Binding();$(".footer-toolbar .footer-toolbar-link a.sort").click(function(){$(".footer-toolbar .sort-item").css("bottom",$(this).height());$(".footer-toolbar .sort-item").is(":hidden")?($(".footer-toolbar .sort-item").show(),$(".shadow").show(),Common.DisableTouchMove(!0)):($(".footer-toolbar .sort-item").hide(),$(".shadow").hide(),Common.DisableTouchMove(!1));$(".footer-toolbar .sort-item li").click(function(){$(this).children("span").show();$(this).siblings().children("span").hide();$(".footer-toolbar .footer-toolbar-link a.sort i").html($(this).data("val"));$(".data-list").data("sort",$(this).data("sort"));$(".data-list").data("page-index",0);$(".data-list").data("page-count",1);LoadData(!0);Common.DisableTouchMove(!1);$(".shadow").hide();$(".footer-toolbar .sort-item").hide()})});$(".footer-toolbar .footer-toolbar-link a.distance").click(function(){$(".data-list").data("sort",4);$(".data-list").data("page-index",0);$(".data-list").data("page-count",1);LoadData(!0)});$(".balance-tab li").click(function(){$(this).addClass("hover").siblings().removeClass("hover");$(".balance-content div[data-direction='"+$(this).data("direction")+"']").show().siblings().hide();$(".balance-content div[data-direction='"+$(this).data("direction")+"']").find("ul li").length==0&&AjaxData.LoadCardAccount(!1)});$(".sba_tabwrap .sba_tab li").click(function(){$(this).addClass("cur").siblings().removeClass("cur");var n=$(this).index();$(".sba_conwrap .sba_con").eq(n).show().siblings().hide();BasicData.CheckType($(this).data("check-type"))});$(".xiaoshi").click(function(){$(this).prev("input").val("");$(this).hide()});$(".favorite").click(function(){$.ajax({method:"GET",url:"/Account/AddFavorite?hotelID="+$(this).data("hotelid"),dataType:"json",beforeSend:function(){},success:function(n){n?Common.Message("收藏成功"):Common.Message("请不要重复收藏")},error:function(n){if(n.status==403){responseText=JSON.parse(n.responseText);var t=responseText.Url+"?returnUrl="+window.location.pathname+window.location.search;window.location=t}}})});$(".balance-tag a").click(function(){$(this).siblings().removeClass("cur");$(this).addClass("cur");$("."+$(this).data("type")).show().siblings().hide();$("."+$(this).data("type")).find("ul li").length==0&&AjaxData.LoadCardAccount(!1)});$(".show-shadow").click(function(){Common.DisableTouchMove(!0);$(".shadow-box").fadeIn()});$(".shadow-box .close").click(function(){Common.DisableTouchMove(!1);$(".shadow-box").fadeOut()});$(".expansions-tab ul li").click(function(){$(this).addClass("current");$(this).siblings().removeClass("current");$(".expansions ."+$(this).data("content")).siblings().hide();$(".expansions ."+$(this).data("content")).fadeIn()});$(".comment div ul.comment-tab li").click(function(){$(this).addClass("jdjs_scur current");$(this).siblings().removeClass("jdjs_scur current");$(".comment .comment-"+$(this).data("type")+"-list").siblings(".comment-list").hide();$(".comment .comment-"+$(this).data("type")+"-list").show();$(this).data("type")!="none"&&$(".comment .comment-"+$(this).data("type")+"-list").find("div").length==0&&AjaxData.LoadHotelComment()})});$(document).ready(function(){function t(){var t=null;return t=n<$(document).scrollTop()?!0:!1,n=$(document).scrollTop(),t}var n=0;window.onscroll=function(){var n=t();n?$(".footer-toolbar").hide():$(".footer-toolbar").show()};$(".partial").scroll(function(){$(".partial").scrollTop()>100?$(".back").fadeIn():$(".back").fadeOut()});$(window).scroll(function(){$(document).scrollTop()>100?$(".back").fadeIn():$(".back").fadeOut()});$(".back").on("click",function(){$("body,html").stop().animate({scrollTop:0},1e3);$(".partial").stop().animate({scrollTop:0},1e3)});$("#OnLoadMessage").val()!=""&&showTip($("#OnLoadMessage").val())});$(document).scroll(function(){10+$(window).scrollTop()>=$(document).height()-$(window).height()&&typeof LoadData=="function"&&LoadData()});var showTip=function(n){function u(){t.addClass("down");t.addClass("trans");setTimeout(function(){t.removeClass("trans")},500)}function f(){t.addClass("trans");t.removeClass("down");setTimeout(function(){t.removeClass("trans");t.remove()},500)}var t=$("#basetip"),i,r;t.html()||(t=$("<div id='basetip' class='topTip'><span><\/span><\/div>"),$("body").append(t));$("span",t).html(n);showTip.preTimeout&&(clearTimeout(showTip.preTimeout),showTip.preTimeout=null);i=navigator.userAgent.toLowerCase();r=i.match(/iphone.+version\/[3-8].+safari/);r&&(window.onscroll=function(){t.css("top",document.body.scrollTop-46+"px")});setTimeout(function(){u()},12);showTip.preTimeout=setTimeout(function(){f()},2e3)},Utility={trim:function(n){return n.replace(/(^\s*)|(\s*$)/g,"")},isNull:function(n){return Utility.trim(n)==""?!0:!1},isEmail:function(n){if(Utility.trim(n)!="")if(!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(n))return!1;return!0},isPhone:function(n){if(Utility.trim(n)!="")return/^1(3|4|5|7|8)\d{9}$/.test(n);return!0},isIDNo:function(n){if(Utility.trim(n)!="")return!/^([0-9]{17}[0-9X]{1})|([0-9]{15})$/.test(n);return!0}},AjaxData={LoadHomeBanners:function(n){$.ajax({method:"GET",url:"/api/Common/GetBanners?r="+Math.random(),data:{pageIndex:1,pageSize:5},dataType:"json",success:function(t){var r=$("#slider .swipe-wrap"),i=$("#circle");r.empty();i.empty();$.each(t.DataList,function(){var n=$('<figure><div class="wrap"><a><img title="'+this.Title+'" src="'+this.ImageUrl+'"><\/a><\/div><\/figure>'),t;this.Url&&($("a",n).attr("href",this.Url),$("a",n).attr("target","_blank"));r.append(n);t=$("<li><\/li>");i.append(t)});i.find("li").eq(0).addClass("current");n()}})},LoadBanners:function(n){var t=$(".activity-list"),i;t.length>0&&(n&&(t.data("page-index",0),t.data("page-count",1),t.empty()),i={pageIndex:parseInt(t.data("page-index"))+1,pageSize:5},i.pageIndex<=t.data("page-count")&&$.ajax({type:"Get",data:i,url:"/api/Common/GetBanners?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0&&(t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){$li=$('<li style="margin: 10px;"><a class="imgbcg"><img title="'+this.Title+'" src="'+this.ImageUrl+'" style="border-radius: 10px;" /><p class="activity-title">'+this.Title+"<\/p><\/a><\/li>");this.Url&&($("a",$li).attr("href",this.Url),$("a",$li).attr("target","_blank"));t.append($li)}))}}))},LoadHotCities:function(){var n=$(".hot-cities");n.data("empty")==!1&&$.ajax({method:"GET",url:"/api/Region/GetHotCities?r="+Math.random(),dataType:"json",success:function(t){n.data("empty",!0);$.each(t,function(){var i=this.RegionName.length>4?this.RegionName.substring(0,3)+"...":this.RegionName,t=$('<li class="cityitem" data-code="'+this.RegionCode+'" data-name="'+this.RegionName+'">'+i+"<\/li>");t.click(function(){var n={CityCode:$(this).data("code"),CityName:$(this).data("name")};BasicData.City(n);BasicData.Binding();$(".y-city").stop().animate({left:$(window).width(),scrollTop:0},300).delay(300).hide(0);$(".y-index").show()});n.children("ul").append(t)})}})},LoadCities:function(){var n=$(".city-initials");n.data("empty")==!1&&$.ajax({method:"GET",url:"/api/Region/GetCities?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(t){n.data("empty",!0);$.each(t,function(){var t=this.PinyinAbbName.substring(0,1),i;$cities="";n.has('ul li[data-initial="'+t+'"]').length==0&&($initialLI=$('<li data-initial="'+t+'">'+t+"<\/li>"),$initialLI.click(function(){$(".y-city").animate({scrollTop:$("#"+t).offset().top},1e3)}),n.children("ul").append($initialLI),$cities=$('<div class="maodian" id="'+t+'"><h3>'+t+"<\/h3><ul><\/ul><\/div>"),$(".cities").append($cities));$cities=$(".cities").find("#"+t);i=$('<li class="cityitem" data-code="'+this.RegionCode+'" data-name="'+this.RegionName+'">'+this.RegionName+"<\/li>");i.click(function(){var n={CityCode:$(this).data("code"),CityName:$(this).data("name")};BasicData.City(n);BasicData.Binding();$(".y-city").stop().animate({left:$(window).width(),scrollTop:0},300).delay(300).hide(0);$(".y-index").show()});$cities.children("ul").append(i)})}})},LoadAutoCompleteCities:function(n){var t=$(".autocomplete-city-data");t.show();$.trim(n)!=""&&$.trim(n)!=t.data("key")&&(t.data("key",$.trim(n)),$.ajax({method:"GET",url:"/api/Region/GetCities?key="+n,dataType:"json",beforeSend:function(){t.children("ul").empty().append("<li>loading<\/li>")},success:function(n){t.children("ul").empty();n.length>0?$.each(n,function(){var i=this,n=$('<li data-code="'+this.RegionCode+'" data-name="'+this.RegionName+'">'+this.RegionName+"<\/li>");n.click(function(){var n={CityCode:$(this).data("code"),CityName:$(this).data("name")};BasicData.City(n);BasicData.Binding();t.children("ul").empty();$(".y-city").stop().animate({left:$(window).width(),scrollTop:0},300).delay(300).hide(0);$(".y-index").show()});t.children("ul").append(n)}):(t.children("ul").append("<li>没有匹配<\/li>"),t.delay(3e3).hide(0))}}))},LoadAutoCompleteKeywords:function(n,t){var i=$(".autocomplete-keyword-data"),r;i.show();$.trim(n)!=""&&$.trim(n)!=i.data("key")&&(i.data("key",$.trim(n)),r={key:n,cityCode:t},$.ajax({method:"GET",url:"/api/Region/GetKeywords",data:r,dataType:"json",beforeSend:function(){i.children("ul").empty().append("<li>loading<\/li>")},success:function(r){i.children("ul").empty();var f={onSearchComplete:function(f){var e,o;if(r.length<5&&u.getStatus()==BMAP_STATUS_SUCCESS)for(e=0;e<f.getCurrentNumPois();e++)o={Code:f.getPoi(e).point.lng+";"+f.getPoi(e).point.lat,Name:f.getPoi(e).title+"<small>("+f.getPoi(e).address+")<\/small>",Type:"Point"},r.push(o);r.length>0?($.each(r,function(){var n=$('<li data-code="'+this.Code+'" data-name="'+this.Name+'" data-type="'+this.Type+'"><p>'+this.Name+"<\/p><\/li>");n.click(function(){if($(this).data("type")=="HotelCode")window.location.href="/Home/Details?hotelID="+$(this).data("code");else{var n={CityCode:t,KeyType:$(this).data("type"),KeyCode:$(this).data("code"),KeyName:$(this).data("name")};BasicData.Keyword(n);BasicData.Binding();i.children("ul").empty();$(".y-gjz").stop().animate({left:$(window).width(),scrollTop:0},300);$(".y-gjz").delay(300).hide(0);$(".y-index").show()}});i.children("ul").append(n)}),$("li[data-type='Point']").length>0&&$("li[data-type='Point']").first().before('<li style="background-color: #f7f7f7;"><small>位置包含 "'+n+'"<\/small><\/li>')):(i.children("ul").append("<li>没有匹配<\/li>"),i.delay(3e3).hide(0))}},u=new BMap.LocalSearch(BasicData.City().CityName,f);u.search(n,{forceLocal:!0})}}))},LoadRegion:function(){var n=$(".Region");(n.data("city")==""||n.data("city")!=BasicData.City().CityCode)&&(n.data("city",BasicData.City().CityCode),n.children("dl").empty().append("<dd>loading<\/dd>"),$.ajax({method:"GET",url:"/api/Region/GetRegion?cityCode="+BasicData.City().CityCode+"&r="+Math.random(),dataType:"json",cache:!0,beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(t){if(n.children("dl").empty(),t.length>0)$.each(t,function(){var t=$('<dd data-code="'+this.RegionCode+'" data-type="RegionCode" data-name="'+this.RegionName+'">'+this.RegionName+'<span class="hide"><img src="/images/red-d.jpg" alt=""><\/span><\/dd>');t.click(function(){$(this).children("span").toggle();$(this).siblings().children("span").hide()});n.children("dl").append(t)}),n.children("dl").first().show();else{var i=$("<dd>暂无数据<\/dd>");n.children("dl").append(i)}}}))},LoadSubway:function(){var n=$(".Subway");(n.data("city")==""||n.data("city")!=BasicData.City().CityCode)&&(n.data("city",BasicData.City().CityCode),n.append("<li>loading<\/li>"),$.ajax({method:"GET",url:"/api/Region/GetLandMarkByMainTypeID?cityCode="+BasicData.City().CityCode+"&landMarkMainTypeID=5&r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(t){if(n.empty(),t.length>0)$.each(t,function(){var t=$("<li>"+this.LandMarkName+' <span class="wzsx_brp"><img src="/images/yuan01_03.png"><\/span><\/li>');t.click(function(){$(".wzsx_brd").show();$(".wzsx_brc").hide();$(this).next(".wzsx_brc").show();$(this).next(".wzsx_brc").next(".wzsx_brd").hide();$(".wzsx_brc dd span").hide()});n.append(t);$dl=$('<dl class="wzsx_brc"><\/dl><\/b>');$.each(this.SubLandMarks,function(){var n=$('<dd data-code="'+this.LandMarkCode+'" data-type="LandMarkID" data-name="'+this.LandMarkName+'">'+this.LandMarkName+'<span class="hide"><img src="/images/red-d.jpg" alt=""><\/span><\/dd>');n.click(function(){$(this).children("span").toggle();$(this).siblings().children("span").hide()});$dl.append(n)});n.append($dl)}),n.children("dl").first().show();else{var i=$("<li>暂无数据<\/li>");n.append(i)}}}))},LoadDistrict:function(){var n=$(".District");(n.data("city")==""||n.data("city")!=BasicData.City().CityCode)&&(n.data("city",BasicData.City().CityCode),n.append("<li>loading<\/li>"),$.ajax({method:"GET",url:"/api/Region/GetLandMarkByMainTypeID?cityCode="+BasicData.City().CityCode+"&landMarkMainTypeID=2&r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(t){if(n.empty(),t.length>0)$.each(t,function(){var t=$("<li>"+this.LandMarkName+' <span class="wzsx_brp"><img src="/images/yuan01_03.png"><\/span><\/li>');t.click(function(){$(".wzsx_brd").show();$(".wzsx_brc").hide();$(this).next(".wzsx_brc").show();$(this).next(".wzsx_brc").next(".wzsx_brd").hide();$(".wzsx_brc dd span").hide()});n.append(t);$dl=$('<dl class="wzsx_brc"><\/dl><\/b>');$.each(this.SubLandMarks,function(){var n=$('<dd data-code="'+this.LandMarkCode+'" data-type="LandMarkID" data-name="'+this.LandMarkName+'">'+this.LandMarkName+'<span class="hide"><img src="/images/red-d.jpg" alt=""><\/span><\/dd>');n.click(function(){$(this).children("span").toggle();$(this).siblings().children("span").hide()});$dl.append(n)});n.append($dl)}),n.children("dl").first().show();else{var i=$("<li>暂无数据<\/li>");n.append(i)}}}))},LoadHotels:function(n){var t=$(".hotel-list"),i;n&&(t.data("page-index",0),t.data("page-count",1),t.empty());t.length>0&&(i={cityCode:BasicData.City().CityCode,arrDate:BasicData.Date().ArrDate,outDate:BasicData.Date().OutDate,keyType:BasicData.Keyword().KeyType,keyCode:BasicData.Keyword().KeyCode,checkType:BasicData.CheckType(),sortType:t.data("sort"),pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({type:"Get",data:i,url:"/api/hotel/getHotels?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0?($(".fjlb-lieb").show(),$(".fjlb-s-k").hide(),t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){var n=$('<li class="fjlb_list hotellist" data-hotelid = '+this.HotelID+'><a href="/Home/Details?hotelID='+this.HotelID+'"><div><b class="imgbcg xkyd newhotel"><img src="/images/xky_03.png"><\/b><div class="fjlt_l imgbcg hotel-img"><img src="'+this.HotelPic+'"><\/div><div class="fjlt_r"><p class="fjlt_r_a">'+this.HotelName.replace("酒店","")+'<\/p><p class="fjlt_r_b"><span class="hpl">'+this.CommentRate+'% <\/span><i class="numb">好评 /<\/i><span class="dsz">'+this.CommentNum+' <\/span><i class="numb">评价<\/i><\/p><p class="fjlt_r_c service"><span class="imgbcg s-icon part"><img src="/images/s_park.png"><\/span><span class="imgbcg s-icon wifi"><img src="/images/s_wifi.png"><\/span><span class="imgbcg s-icon laundry"><img src="/images/s_laundry.png"><\/span><span class="imgbcg s-icon meeting"><img src="/images/s_meeting.png"><\/span><span class="imgbcg s-icon air-parkup"><img src="/images/s_air-parkup.png"><\/span><span class="imgbcg s-icon hot-water"><img src="/images/s_hot-water.png"><\/span><\/p><p class="fjlt_r_d honour"><span class="jad"><img src="/images/tubiao_01.jpg"><\/span><span class="zlzx"><img src="/images/tubiao_02.jpg"><\/span><span class="tsjd"><img src="/images/tubiao_03.jpg"><\/span><span class="kfsqj"><img src="/images/tubiao_04.gif"><\/span><\/p><\/div><div class="fjlt_z"><p class="fjlt_z_k"><i class="zb">￥<\/i><span class="dsz minprice"><\/span><i class="qi">起<\/i><\/p><p class="fjlt_z_y distance"><span class="mss">距离'+this.Distance.toFixed(1)+'km<\/span><\/p><p class="balance">现金券抵付<\/p><p class="fjlt_z_v"><\/p><\/div><div class="imgbcg ddot"><img src="/images/dot_02_03.png"><\/div><\/div><\/a><\/li>');this.Distance>0?$(".distance",n).show():$(".distance",n).hide();this.IsNewOpen==2&&$(".newhotel img",n).hide();this.IfAdvancePayMent==1?$(".balance",n).show():$(".balance",n).hide();(this.DiscountPriceType&EnumsData.DiscountPriceType.今日特惠)==EnumsData.DiscountPriceType.今日特惠&&$(".hotel-img",n).append('<b class="icon-list-today"><img src="/images/icon-todaysale-list.png"><\/b>');(this.Honour&1)==1&&$(".honour .jad",n).show();(this.Honour&2)==2&&$(".honour .zlzx",n).show();(this.Honour&4)==4&&$(".honour .tsjd",n).show();(this.Honour&8)==8&&$(".honour .kfsqj",n).show();BasicData.CheckType()=="0"?$(".minprice",n).html(this.MinPrice):$(".minprice",n).html(this.HourPrice);$.each(this.HotelServices,function(){switch(this.FacilityTypeID){case 100000002:$(".service .part",n).show();break;case 100000003:$(".service .part",n).show();break;case 100000001:$(".service .wifi",n).show();break;case 100000013:$(".service .laundry",n).show();break;case 100000009:$(".service .meeting",n).show();break;case 100000011:$(".service .air-parkup",n).show();break;case 100000008:$(".service .hot-water",n).show()}});t.append(n)})):($(".fjlb-lieb").hide(),$(".fjlb-s-k").show())}}))},LoadNearHotels:function(n,t){var i=$(".near-hotel-list"),r;n&&(i.data("page-index",0),i.data("page-count",1),i.empty());i.length>0&&t&&(r={cityCode:BasicData.City().CityCode,arrDate:BasicData.Date().ArrDate,outDate:BasicData.Date().OutDate,keyType:BasicData.Keyword().KeyType,keyCode:BasicData.Keyword().KeyCode,latitude:t.Latitude,longitude:t.Longitude,checkType:BasicData.CheckType(),sortType:i.data("sort"),pageIndex:parseInt(i.data("page-index"))+1},r.pageIndex<=i.data("page-count")&&$.ajax({type:"Get",data:r,url:"/api/hotel/getHotels?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0?($(".fjlb-lieb").show(),$(".fjlb-s-k").hide(),i.data("page-index",n.PageIndex),i.data("page-count",n.PageCount),$.each(n.DataList,function(){var n=$('<li class="fjlb_list hotellist" data-hotelid = '+this.HotelID+'><a href="/Home/Details?hotelID='+this.HotelID+'"><div><b class="imgbcg xkyd newhotel"><img src="/images/xky_03.png"><\/b><div class="fjlt_l imgbcg"><img src="'+this.HotelPic+'"><\/div><div class="fjlt_r"><p class="fjlt_r_a">'+this.HotelName.replace("酒店","")+'<\/p><p class="fjlt_r_b"><span class="hpl">'+this.CommentRate+'% <\/span><i class="numb">好评 /<\/i><span class="dsz">'+this.CommentNum+' <\/span><i class="numb">评价<\/i><\/p><p class="fjlt_r_c service"><span class="imgbcg s-icon part"><img src="/images/s_park.png"><\/span><span class="imgbcg s-icon wifi"><img src="/images/s_wifi.png"><\/span><span class="imgbcg s-icon laundry"><img src="/images/s_laundry.png"><\/span><span class="imgbcg s-icon meeting"><img src="/images/s_meeting.png"><\/span><span class="imgbcg s-icon air-parkup"><img src="/images/s_air-parkup.png"><\/span><span class="imgbcg s-icon hot-water"><img src="/images/s_hot-water.png"><\/span><\/p><p class="fjlt_r_d honour"><span class="jad"><img src="/images/tubiao_01.jpg"><\/span><span class="zlzx"><img src="/images/tubiao_02.jpg"><\/span><span class="tsjd"><img src="/images/tubiao_03.jpg"><\/span><\/p><\/div><div class="fjlt_z"><p class="fjlt_z_k"><i class="zb">￥<\/i><span class="dsz minprice"><\/span><i class="qi">起<\/i><\/p><p class="fjlt_z_y"><span class="mss">距离'+this.Distance.toFixed(1)+'km<\/span><\/p><p class="balance">现金券抵付<\/p><p class="fjlt_z_v"><\/p><\/div><div class="imgbcg ddot"><img src="/images/dot_02_03.png"><\/div><\/div><\/a><\/li>');this.IsNewOpen==2&&$(".newhotel img",n).hide();this.IfAdvancePayMent==1?$(".balance",n).show():$(".balance",n).hide();(this.Honour&1)==1&&$(".honour .jad",n).show();(this.Honour&2)==2&&$(".honour .zlzx",n).show();(this.Honour&4)==4&&$(".honour .tsjd",n).show();BasicData.CheckType()=="0"?$(".minprice",n).html(this.MinPrice):$(".minprice",n).html(this.HourPrice);$.each(this.HotelServices,function(){switch(this.FacilityTypeID){case 100000002:$(".service .part",n).show();break;case 100000003:$(".service .part",n).show();break;case 100000001:$(".service .wifi",n).show();break;case 100000013:$(".service .laundry",n).show();break;case 100000009:$(".service .meeting",n).show();break;case 100000011:$(".service .air-parkup",n).show();break;case 100000008:$(".service .hot-water",n).show()}});i.append(n)})):($(".fjlb-lieb").hide(),$(".fjlb-s-k").show())}}))},LoadWaiterHotels:function(n){var t=$(".hotel-list"),r=$("#OpenID").val(),u=$("#tshotelkey").val(),i;n&&(t.data("page-index",0),t.data("page-count",1),t.empty());t.length>0&&(i={cityCode:BasicData.City().CityCode,keyWords:u,latitude:null,longitude:null,pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({type:"Get",data:i,url:"/api/hotel/GetWeChatHotels?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0?($(".fjlb-lieb").show(),$(".fjlb-s-k").hide(),t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){var n=$('<li><a href="/WaiterStar/Vote?hotelid='+this.HotelID+"&&openid="+r+'" class="btn-list-vote" rel="external">投<\/a><h2>'+this.HotelName.replace("酒店","")+"<\/h2><p>"+this.Address+"<\/p><\/li>");t.append(n)})):($(".fjlb-lieb").hide(),$(".fjlb-s-k").show())}}))},LoadWaiterNearHotels:function(n,t){function f(n){var t="0";return n>0&&(t=n.toFixed(2)),t}var i=$(".hotel-list"),u=$("#OpenID").val(),r;n&&(i.data("page-index",0),i.data("page-count",1),i.empty());i.length>0&&t&&(r={cityCode:BasicData.City().CityCode,keyWords:"",latitude:t.Latitude,longitude:t.Longitude,pageIndex:parseInt(i.data("page-index"))+1},r.pageIndex<=i.data("page-count")&&$.ajax({type:"Get",data:r,url:"/api/hotel/GetWeChatHotels?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0?($(".fjlb-lieb").show(),$(".fjlb-s-k").hide(),i.data("page-index",n.PageIndex),i.data("page-count",n.PageCount),$.each(n.DataList,function(){var n=$('<li><a class="btn-list-vote" rel="external" href="/WaiterStar/Vote?hotelid='+this.HotelID+"&&openid="+u+'" class="btn-list-vote" rel="external">投<\/a><p>'+f(this.Distance)+"公里<\/p><h2>"+this.HotelName.replace("酒店","")+"<\/h2><p>"+this.Address+"<\/p><\/li>");i.append(n)})):($(".fjlb-lieb").hide(),$(".fjlb-s-k").show())}}))},LoadWaiterVoteList:function(){function r(){var f=$("#daywaitercount").val(),r=$("#dayopids").val(),e=$("#daywaitercount2").val(),u=$("#dayopids2").val(),i=[],t,n;if(i=r.split(","),i.length>0)for(n=0;n<i.length;n++)$("#checkbox_"+i[n]+"").attr("disabled",!0);if(t=[],t=u.split(","),t.length>0)for(n=0;n<t.length;n++)$("#checkbox_"+t[n]+"").attr("disabled",!0)}var n=$("#OpenID").val(),t=$("#HotelID").val(),i={OpenID:n,HotelID:t,VoteType:"Vote"};n!=""&&t!=""&&$.ajax({type:"Get",data:i,url:"/api/hotel/GetVoteOrNOVoteList?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){if(n.VoteList!=null){var t=n.success,i=n.DayWaitercount,u=n.DayOpids;$("#daywaitercount").val(i);$("#dayopids").val(u);t=="00"&&($.each(n.VoteList,function(){var n=$('<li><div class="ui-check"><input onclick="Cbx('+this.OptionId+',1)" name="checkbox1" value="'+this.OptionId+'" type="checkbox" id="checkbox_'+this.OptionId+'" /><label for="checkbox_'+this.OptionId+'"><i><\/i><h5>'+this.OptionName+"<\/h5><p>职务: "+this.JopName+"<\/p><\/label><\/div><\/li>");$("#WaiVoteList").append(n);$("#hotelname").html(this.NameCn)}),r())}else $("#WaiVoteList").append("")}})},LoadWaiterNOVoteList:function(){function r(){var f=$("#daywaitercount").val(),r=$("#dayopids").val(),e=$("#daywaitercount2").val(),u=$("#dayopids2").val(),i=[],t,n;if(i=r.split(","),i.length>0)for(n=0;n<i.length;n++)$("#checkbox_"+i[n]+"").attr("disabled",!0);if(t=[],t=u.split(","),t.length>0)for(n=0;n<t.length;n++)$("#checkbox_"+t[n]+"").attr("disabled",!0)}var n=$("#OpenID").val(),t=$("#HotelID").val(),i={OpenID:n,HotelID:t,VoteType:"NoVote"};n!=""&&t!=""&&$.ajax({type:"Get",data:i,url:"/api/hotel/GetVoteOrNOVoteList?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){if(n.VoteList!=null){var t=n.success,i=n.DayWaitercount,u=n.DayOpids;$("#daywaitercount2").val(i);$("#dayopids2").val(u);t=="00"&&($.each(n.VoteList,function(){var n=$('<li><div class="ui-check"><input onclick="Cbx('+this.OptionId+',2)" name="checkbox2" value="'+this.OptionId+'" type="checkbox" id="checkbox_'+this.OptionId+'" /><label for="checkbox_'+this.OptionId+'"><i><\/i><h5>'+this.OptionName+"<\/h5><p>职务: "+this.JopName+"<\/p><\/label><\/div><\/li>");$("#WaiNoVoteList").append(n);$("#hotelname").html(this.NameCn)}),r())}else $("#WaiNoVoteList").append("")}})},LoadWaiterVoteSubmit:function(){var n=$("#checkbox1").val(),t=$("#HotelID").val(),i=$("#OpenID").val(),r={hotelID:t,openID:i,votes:n};n.length>0&&t!=""&&i!=""&&$.ajax({type:"Get",data:r,url:"/api/hotel/GetSubmitVote?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){var i=n.success,t=n.typesCid;i=="00"&&(t=="1"?($("#WaiVoteList").html(""),$("#WaiNoVoteList").html(""),AjaxData.LoadWaiterVoteList(),AjaxData.LoadWaiterNOVoteList(),popupMemberSupper("pop-award")):t=="3"?($("#WaiVoteList").html(""),$("#WaiNoVoteList").html(""),AjaxData.LoadWaiterVoteList(),AjaxData.LoadWaiterNOVoteList(),popupMemberSupper("pop-tip1")):t=="2"?($("#WaiVoteList").html(""),$("#WaiNoVoteList").html(""),AjaxData.LoadWaiterVoteList(),AjaxData.LoadWaiterNOVoteList(),popupMemberSupper("pop-tip3")):($("#WaiVoteList").html(""),$("#WaiNoVoteList").html(""),AjaxData.LoadWaiterVoteList(),AjaxData.LoadWaiterNOVoteList(),popupMemberSupper("pop-tip2")))}})},LoadHotelRooms:function(){var n=$(".hotel-room-list"),t;n.empty();n.length>0&&(t={hotelID:$("#HotelID").val(),arrDate:BasicData.Date().ArrDate,outDate:BasicData.Date().OutDate,cardTypeID:$("#CardTypeID").val()},$.ajax({method:"Get",data:t,url:"/api/hotel/GetHotelRooms?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(t){var i=["RoomName","RoomArea","BedSize","BedName","RoomConfig","SpecialDesc","RoomDesc","IfAddBed","AddBedPrice","AddBedDesc","RoomPic"];$.each(t,function(){var t,r;if(this.RoomPrices.length>0){BasicData.CheckType()=="0"?(t=$('<div class="jdxq_gzcj hotel-room" data-info=\''+JSON.stringify(this,i)+'\'><div class="jdxq_gzcjul"><span class="gzcj_txt show-room-info" style="border-bottom:1px dashed #A9A8A8;">'+this.RoomName+'<\/span><span class="gzcj_txt02 room-price-tag"><\/span><span class="gzcj_fr01"><i class="nmr min-room-price" data-price="'+this.MinRoomPrice+'">'+this.MinRoomPrice+'<\/i><i class="nmq">起<\/i><\/span><b style="width:36%;"><\/b><\/div><div class="jdxq_gzcjli room-prices"><\/div><\/div>'),$roomprice=$('<div class="wysgl wysgl-new"><div class="wysgl-div"><span class="wysgl_lz01">会员价<\/span><a href="/Order/Create?HotelID='+this.HotelID+"&HotelName="+$("#HotelName").val()+"&RoomTypeID="+this.RoomTypeID+"&RoomTypeName="+this.RoomName+"&ArrDate="+BasicData.Date().ArrDate+"&OutDate="+BasicData.Date().OutDate+'" class="wysgl_lz02 book">预订<\/a><span class="gzcj_fr01"><i class="nmr">¥'+this.RoomPrices[0].Price+'<\/i><\/span><\/div><ul class="gzyhjb"><li><img src="/images/p-evip.png"><i class="dwsjg">'+this.RoomPrices[0].EVIPPrice+'<\/i><\/li><li><img src="/images/p-vip.png"><i class="dwsjg">'+this.RoomPrices[0].VIPPrice+'<\/i><\/li><li><img src="/images/p-gold.png"><i class="dwsjg">'+this.RoomPrices[0].GoldPrice+'<\/i><\/li><li><img src="/images/p-super.png"><i class="dwsjg">'+this.RoomPrices[0].SuperPrice+"<\/i><\/li><\/ul><\/div>"),$(".room-prices",t).append($roomprice),this.TeamBuyRooms.length>0&&(r=parseInt($(".min-room-price",t).data("price")),$.each(this.TeamBuyRooms,function(){r>this.Price&&(r=this.Price)}),$(".room-price-tag",t).append('<img src="/images/bb_07.png">'),$(".min-room-price",t).html(r),$otherprices=$('<div class="wysgl"><span class="wysgl_lz01">团购价<\/span><a href="/Order/Create?HotelID='+this.HotelID+"&HotelName="+$("#HotelName").val()+"&RoomTypeID="+this.RoomTypeID+"&RoomTypeName="+this.RoomName+"&ArrDate="+BasicData.Date().ArrDate+"&OutDate="+BasicData.Date().OutDate+"&RateCode="+this.TeamBuyRooms[0].RateCode+'" class="wysgl_lz02 wysgl_lz02s book teambuybook">预订<\/a><span class="wysgl_lz03 wysgl_lz03s">预付<\/span><span class="gzcj_fr01"><i class="nmr">¥'+this.TeamBuyRooms[0].Price+"<\/i><\/span><\/div>"),$(".room-prices",t).append($otherprices))):this.HourRooms.length>0&&(t=$('<div class="jdxq_gzcj hotel-room" data-info=\''+JSON.stringify(this,i)+'\'><div class="jdxq_gzcjul"><span class="gzcj_txt show-room-info">'+this.RoomName+'<\/span><span class="gzcj_txt02 room-price-tag"><\/span><span class="gzcj_fr01"><i class="nmr min-room-price" data-price="'+this.MinRoomPrice+'">'+this.MinRoomPrice+'<\/i><i class="nmq">'+this.HourRooms[0].Basetime+'小时<\/i><\/span><b><\/b><\/div><div class="jdxq_gzcjli room-prices"><\/div><\/div>'),$(".min-room-price",t).html(this.HourRooms[0].Baseamt),$hourprices=$('<div class="wysgl"><span class="wysgl_lz01">时租房<\/span><a href="/Order/CreateHour?HotelID='+this.HotelID+"&HotelName="+$("#HotelName").val()+"&RoomTypeID="+this.RoomTypeID+"&RoomTypeName="+this.RoomName+"&ArrDate="+BasicData.Date().ArrDate+"&OutDate="+BasicData.Date().OutDate+'&RateCode=HOR" class="wysgl_lz02 book hourbook">预订<\/a><span class="wysgl_lz03">'+this.HourRooms[0].Basetime+'小时<\/span><span class="gzcj_fr01"><i class="nmr">¥'+this.HourRooms[0].Baseamt+"<\/i><\/span><\/div>"),$(".room-prices",t).append($hourprices),this.HourRooms[0].CanOrder||$("a.hourbook",t).removeAttr("href").addClass("wysgl_lz02 wysgl_lz02a").html("满房"));this.MinRoomQuantity<=0?$("a.book",t).removeAttr("href").addClass("wysgl_lz02 wysgl_lz02a").html("满房"):this.MinTeamBuyRoomQuantity<=0&&$("a.teambuybook",t).removeAttr("href").addClass("wysgl_lz02 wysgl_lz02a").html("满房");(this.DiscountPriceType&EnumsData.DiscountPriceType.今日特惠)==EnumsData.DiscountPriceType.今日特惠&&$(".room-price-tag",t).append('<img src="/images/sicon-todaySale.png">');$(".show-room-info",t).click(function(){var n,t,i;$("body").css("overflow","hidden");n=$(this).parents(".hotel-room").data("info");t=$(".hotel-room-info");$(".roomname",t).html(n.RoomName);$(".roompic",t).attr("src",n.RoomPic);$(".roomarea",t).html(n.RoomArea+"㎡");$(".bedname",t).html(n.BedName+"("+n.BedSize+")");i="";i=n.IfAddBed==!1?"不可加床":"可加床,加床价格:"+n.AddBedPrice+"元/张.<small>(说明:"+n.AddBedDesc+")<\/small>";$(".addbed",t).html(i);$(".roomconfig",t).html(BasicData.EnumsFlags(EnumsData.RoomConfig,n.RoomConfig));$(".specialdesc",t).html(BasicData.EnumsFlags(EnumsData.SpecialDesc,n.SpecialDesc));$(".roomdesc",t).html(n.RoomDesc);t.fadeIn()});$("b",t).on("click",function(){$(this).parent().toggleClass("jdxq_gzcjuls");$(this).parent().siblings("div").toggle();$(this).parents(".hotel-room").siblings().find(".jdxq_gzcjul").removeClass("jdxq_gzcjuls");$(this).parents(".hotel-room").siblings().find(".jdxq_gzcjli").hide()});n.append(t)}})}}))},LoadHotelCommentCount:function(){var n={hotelID:$("#HotelID").val()};$.ajax({method:"Get",data:n,url:"/api/hotel/GetHotelCommentCount?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){var r;$content=$(".comment");var i=parseInt(n.CommentRate)/20,t=parseInt(i),u=0;for(i>t&&(i-t>=.3&&i-t<.7?u=t+1:i-t>=.7&&(t=t+1)),r=1;r<=5;r++)r<=t?$(".comment-star",$content).append('<li><img src="/images/xing1_03.png"><\/li>'):r==u?$(".comment-star",$content).append('<li><img src="/images/xing2_03.png"><\/li>'):$(".comment-star",$content).append('<li><img src="/images/xing3_03.png"><\/li>');$(".comment-rate",$content).html(n.CommentRate);$(".T1Count30",$content).html(n.T1Count30);$(".T1Count90",$content).html(n.T1Count90);$(".T1Count180",$content).html(n.T1Count180);$(".T2Count30",$content).html(n.T2Count30);$(".T2Count90",$content).html(n.T2Count90);$(".T2Count180",$content).html(n.T2Count180);$(".T3Count30",$content).html(n.T3Count30);$(".T3Count90",$content).html(n.T3Count90);$(".T3Count180",$content).html(n.T3Count180);$(".T4Count30",$content).html(n.T4Count30);$(".T4Count90",$content).html(n.T4Count90);$(".T4Count180",$content).html(n.T4Count180);$(".T5Count30",$content).html(n.T5Count30);$(".T5Count90",$content).html(n.T5Count90);$(".T5Count180",$content).html(n.T5Count180);$(".all-count",$content).html(n.CommentCount);$(".web-count",$content).html(n.WebCount);$(".sms-count",$content).html(n.SMSCount)}})},LoadHotelComment:function(n){var r=$(".comment-tab li.current"),t=$(".comment .comment-"+r.data("type")+"-list"),i;t.length>0&&(n&&(t.data("page-index",0),t.data("page-count",1),t.empty()),i={hotelID:$("#HotelID").val(),commentType:r.data("val"),pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({method:"GET",data:i,url:"/api/hotel/GetHotelComments?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){if(n.TotalCount>0){t.data("page-index",n.PageIndex);t.data("page-count",n.PageCount);$.each(n.DataList,function(){$div=$('<div class="jdjs_ew"><p class="jdjs_ew_o"><span class="jdjs_ew_ok">'+BasicData.CommentTag(this.CommentTag)+'<\/span><span class="jdjs_ew_oq"><i class="jdjs_ew_oq_pic"><img src="'+i(this.CommentNo)+'"><\/i><i class="jdjs_ew_oq_txt">'+this.CommentNo+"<\/i><\/span>"+r(this.CardType)+'<span class="jdjs_ew_oa">'+this.CommentDate+'<\/span><\/p><p class="jdjs_ew_f">'+this.Content+"<\/p><\/div>");t.append($div)});function i(n){return n.length==11?"/images/arr10_03.png":"/images/arr11_03.png"}function r(n){return n.length>0?'<span class="jdjs_ew_oj">'+n+"<\/span>":""}}}}))},LoadCardAccount:function(n){var i=$(".balance-tab li.hover"),t=$(".balance-"+i.data("direction")+"-list"),r;t.length>0&&(n&&(t.data("page-index",0),t.data("page-count",1),t.empty()),r={direction:i.data("direction"),pageIndex:parseInt(t.data("page-index"))+1},r.pageIndex<=t.data("page-count")&&$.ajax({method:"GET",data:r,url:"/api/Mem/GetAccounts?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0&&(t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){i.data("direction")=="101"?($li=$('<li><p class="p1">'+this.CumulativeDesc+'<\/p><p class="p3">有效期:'+this.FailDate+'<\/p><p class="money">+'+this.Amounts+"<\/p><\/li>"),t.append($li)):i.data("direction")=="102"&&($li=$('<li><p class="p1">'+this.CumulativeDesc+" <font>¥"+this.Amounts+'<\/font><\/p><p class="p2">用于支付订单:'+this.OrderID+'<\/p><p class="p3">'+this.CreateTime+'<\/p><p class="more"><span class="hot"><a href="/Order/Details?orderNo='+this.OrderID+'&returnUrl=/Account/BalanceDetails?direction=102"><img src="/images/more.jpg"><\/a><\/span><\/p><\/li>'),t.append($li))}))}}))},LoadCardPoints:function(n){var t=$(".point-list"),i;t.length>0&&(n&&(t.data("page-index",0),t.data("page-count",1),t.empty()),i={pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({type:"Get",data:i,url:"/api/Mem/GetPoints?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0&&(t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){this.Direction==1?($li=$('<li><p class="p1">'+this.CumulativeDesc+'<\/p><p class="p3">有效期:'+this.FailDate+'<\/p><p class="money">+'+this.RoomDayPoints+"<\/p><\/li>"),t.append($li)):($li=$('<li><p class="p1">'+this.CumulativeDesc+'<\/p><p class="p3">减扣时间'+this.CreateTime+'<\/p><p class="money">-'+this.RoomDayPoints+"<\/p><\/li>"),t.append($li))}))}}))},LoadCardCoupon:function(n){var t=$(".coupon-list"),i;t.length>0&&(n&&(t.data("page-index",0),t.data("page-count",1),t.empty()),i={pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({type:"Get",data:i,url:"/api/Mem/GetCouponsGroups?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0&&(t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){var n=$('<li><div class="li-left"><p>金额：'+this.TotalAcount+" ("+this.CouponAmount+" * "+this.CouponCount+")<\/p><p>来源："+this.ActivityCode+"<\/p><p>有效期："+this.ExpiryDate+'<\/p><\/div><div class="li-right"><span>￥'+this.CouponAmount+'<\/span><a class="coupon-status"><\/a><\/div><\/li>');this.CouponStatus==EnumsData.CouponState.绑定?$(".coupon-status",n).html("未使用"):this.CouponStatus==EnumsData.CouponState.使用?($(".coupon-status",n).html("已使用"),$(".coupon-status",n).addClass("none")):($(".coupon-status",n).html("已过期"),$(".coupon-status",n).addClass("none"),$(".li-left",n).addClass("grey01"),$(".li-right",n).addClass("grey02"));t.append(n)}))}}))},LoadCardFavorite:function(n){var t=$(".favorite-list"),i;t.length>0&&(n&&(t.data("page-index",0),t.data("page-count",1),t.empty()),i={pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({type:"Get",data:i,url:"/api/Mem/GetMyFavorites?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0?($(".sc-box").hide(),$(".fjlb-lieb").show(),t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){var n=$('<li class="fjlb_list"><a href="/Home/Details?hotelID='+this.HotelID+'"><div><div class="fjlt_l imgbcg"><img src="'+this.PictureFile+'" /><\/div><div class="fjlt_r"><p class="fjlt_r_a">'+this.HotelName+'<\/p><p class="fjlt_r_b"><span class="hpl">'+this.CommentRate+'% <\/span><i class="numb">好评 /<\/i><span class="dsz">'+this.CommentNum+' <\/span><i class="numb">评价<\/i><\/p><\/div><div class="fjlt_z"><p class="fjlt_z_k"><i class="zb">￥<\/i><span class="dsz">'+this.MinPrice+'<\/span><i class="qi">起<\/i><\/p><\/div><div class="imgbcg ddot"><img src="/images/dot_02_03.png"><\/div><\/div><\/a><\/li>');t.append(n)})):($(".sc-box").show(),$(".fjlb-lieb").hide())}}))},LoadCustomerOrder:function(n){var t=$(".order-list"),i;t.length>0&&(n&&(t.data("page-index",0),t.data("page-count",1),t.empty()),i={pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({type:"Get",data:i,url:"/api/Book/GetOrders?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0?($(".sc-box").hide(),$(".wddd-box").show(),t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){var n=$('<li><div class="div-t"><span class="order-channel"><img src="/images/arr4.jpg" ><\/span><a href="/Order/Details?orderNo='+this.OrderNo+'">'+this.HotelName+'  <\/a><\/div><div class="div-m"><a href="/Order/Details?orderNo='+this.OrderNo+'">订单号：'+this.OrderNo+'  <\/a><\/div><div class="div-m"><span class="span-l">订单状态：'+EnumsData.EnumName(EnumsData.OrderStatus,this.OrderStatus)+'<\/span><\/div><div class="div-b"><span class="span-l">入住日期：'+this.ArrDate+'<\/span><span class="span-r">订单总价：<b>¥'+this.TotalPrice+'<\/b><\/span><\/div><span class="biaoqian order-status"><\/span><\/li>');this.ChannelID==EnumsData.OrderChannel.手机H5||this.ChannelID==EnumsData.OrderChannel.微信公众账号||this.ChannelID==EnumsData.OrderChannel.手机AppiPhone||this.ChannelID==EnumsData.OrderChannel.手机AppAndroid?$(".order-channel img",n).attr("src","/images/arr4.jpg"):$(".order-channel img",n).attr("src","/images/arr3.jpg");this.OrderStatus==EnumsData.OrderStatus.取消?$(".order-status",n).append('<img src="/images/arr8.jpg" alt="">'):(this.OrderStatus==EnumsData.OrderStatus.预订||this.OrderStatus==EnumsData.OrderStatus.等候)&&(this.PayStatus==1?$(".order-status",n).append('<img src="/images/arr9.jpg" alt="">'):$(".order-status",n).append('<img src="/images/arr7.jpg" alt="">'));t.append(n)})):($(".sc-box").show(),$(".wddd-box").hide())}}))},LoadMallGiftType:function(n){var t=$(".category-list"),i;t.length>0&&(n&&(t.data("page-index",0),t.data("page-count",1),t.empty()),i={pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({type:"Get",data:i,url:"/api/SuperMallApi/GetMallGiftTypeList?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0&&(t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){var n=$('<a class="one-category category-room" href="/SuperMall/GiftList?typeId='+this.GiftTypeID+'"><img src="/images/SuperMall/room-product.png" class="pic-cate"><div class="category-txt"><h2>'+this.GiftTypeName+'<\/h2><p>room product<\/p><div class="btn-view">查看<\/div><\/div><\/a>');this.GiftTypeID==1e3?$(".pic-cate",n).attr("src","/images/SuperMall/room-product.png"):(n.addClass("category-non-room").removeClass("category-room"),$(".pic-cate",n).attr("src","/images/SuperMall/non-room-product.png"));t.append(n)}))}}))},LoadMallGiftList:function(n){var t=$(".goods-list"),r=$("#ImagePath").val(),i;t.length>0&&(n&&(t.data("page-index",0),t.data("page-count",1),t.empty()),i={giftType:t.data("gift-type"),ArriveDate:t.data("arrive-date"),pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({method:"GET",data:i,url:"/api/SuperMallApi/GetMallGiftList?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0&&(t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){var n=$('<li class="one-good"><a href="/SuperMall/Gift?giftId='+this.GiftID+'" class="photo-link"><img src="'+r+this.GiftPhoto+'"><\/a><div class="detail"><a href="/SuperMall/Gift?giftId='+this.GiftID+'" class="detail-link"><h2 class="name">'+this.GiftName+'<\/h2><p class="past-time">￥'+this.OriginalPrice+'<\/p><p class="present-time"><em class="price-cash exchangermb">￥'+this.ExchangeRMB+'<\/em>&nbsp;<em class="price-point exchangermb exchangepoint">+&nbsp;'+this.ExchangePoint+'间夜点数<\/em><em class="night-point-price exchangepoint">'+this.ExchangePoint+"间夜点数<\/em><\/p><\/a><\/div><\/li>");this.ExchangeRMB==0?$(".exchangermb",n).hide():this.ExchangePoint==0?$(".exchangepoint",n).hide():$(".night-point-price.exchangepoint",n).hide();t.append(n)}))}}))},LoadMallConfig:function(){var n=$(".contact-ul.contact-fill-ul"),t;n.empty();n.length>0&&(t={giftId:$("#GiftID").val()},$.ajax({method:"Get",data:t,url:"/api/SuperMallApi/GetGiftMallConfig?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(t){t.length>0&&$.each(t,function(){var t=$('<li><label class="tit">'+this.ConfigName+'<\/label><input type="hidden" name="configName" value="'+this.ConfigName+'" /><input type="hidden" name="configId" value="'+this.ConfigID+'" /><input type="text" class="i-txt-contact" name="configValue"><\/li>');n.append(t)})}}))},LoadMallOrderList:function(n){var t=$(".order-orderlist"),r=$("#ImagePath").val(),i;t.length>0&&(n&&(t.data("page-index",0),t.data("page-count",1),t.empty()),i={cardno:$("#cardNo").val(),pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({method:"GET",data:i,url:"/api/SuperMallApi/GetOrderList?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0&&(t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){var n=$('<div class="one-order"><div class="order-statement">'+this.OrderStatusName+'<\/div><a href="/SuperMall/OrderDetail?orderId='+this.OrderID+'" class="order-link"><ul class="product-list product-clickable"><li class="one-product"><img src="'+r+this.MallOrderGifts[0].GiftPhoto+'" class="photo"><div class="detail"><h2 class="name">'+this.MallOrderGifts[0].GiftName+'<\/h2><p class="prices"><em class="price-cash exchangermb">￥'+this.MallOrderGifts[0].RMBUnit+'<\/em>&nbsp;<em class="price-point exchangermb exchangepoint">+&nbsp;'+this.MallOrderGifts[0].PointUnit+'间夜点数<\/em><em class="night-point-price exchangepoint">'+this.MallOrderGifts[0].PointUnit+'间夜点数<\/em><i class="amount">×'+this.MallOrderGifts[0].ExchangeNum+'<\/i><\/p><\/div><\/li><\/ul><\/a><div class="order-summary"><a href="/SuperMall/OrderConfirm?orderId='+this.OrderID+'" class="btn-view" style="display:none">支付<\/a><p>合计: <em class="cash exchangermbtotal">￥'+this.RMBTAmount+'<\/em><em class="night-point exchangermbtotal exchangepointtotal"> + '+this.PointAmount+'间夜点数<\/em><em class="night-point-price exchangepointtotal"> '+this.PointAmount+'间夜点数<\/em><\/p><p><span class="date">'+this.CreateTime+"<\/span><\/p><\/div><\/div>");this.MallOrderGifts[0].RMBUnit==0?$(".exchangermb",n).hide():this.MallOrderGifts[0].PointUnit==0?$(".exchangepoint",n).hide():$(".night-point-price.exchangepoint",n).hide();this.RMBTAmount==0?$(".exchangermbtotal",n).hide():this.PointAmount==0?$(".exchangepointtotal",n).hide():$(".night-point-price.exchangepointtotal",n).hide();this.OrderStatus==1&&$(".btn-view",n).show();t.append(n)}))}}))},LoadDouble11Hotels:function(n){var t=$(".double11-hotel-list"),i;n&&(t.data("page-index",0),t.data("page-count",1),t.empty());t.length>0&&(i={cityCode:BasicData.City().CityCode,arrDate:BasicData.Date().ArrDate,outDate:BasicData.Date().OutDate,rateCode:$("#RateCode").val(),keys:$("#Keys").val(),pageIndex:parseInt(t.data("page-index"))+1},i.pageIndex<=t.data("page-count")&&$.ajax({type:"Get",data:i,url:"/api/SuperMallApi/getPromotionHotels?r="+Math.random(),dataType:"json",beforeSend:function(){Common.Loading()},complete:function(){Common.Loaded()},success:function(n){n.TotalCount>0?($(".double11-hotel-list").show(),$(".double11-hotel-list-none").hide(),t.data("page-index",n.PageIndex),t.data("page-count",n.PageCount),$.each(n.DataList,function(){$li=$('<li><a href="/Home/Details?hotelID='+this.HotelID+'" target="_blank"><img src="'+this.HotelImage+'" class="product-pic-m"><\/a><h2><a href="/Home/Details?hotelID='+this.HotelID+'" target="_blank">'+this.HotelName+"<\/a><\/h2><p>"+this.RoomTypeName+'<\/p><div class="pro-btm-info"><a href="/Double11/Reservation?roomTypeID='+this.RoomTypeID+"&rateCode="+$("#RateCode").val()+"&arrDate="+BasicData.Date().ArrDate+"&outDate="+BasicData.Date().OutDate+"&keys="+$("#Keys").val()+'" class="btn-yellow">预约<\/a><em class="price">￥'+this.Price+"<\/em><\/div><\/li>");t.append($li)})):($(".double11-hotel-list").hide(),$(".double11-hotel-list-none").show())}}))}}
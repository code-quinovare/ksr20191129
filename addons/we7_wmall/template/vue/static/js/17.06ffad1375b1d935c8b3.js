webpackJsonp([17],{Ls0E:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("EuEE"),i={data:function(){return{mobile:"",password:"",config:{}}},beforeRouteEnter:function(t,e,s){e.name&&(window.redirct_url={path:e.path,query:e.query}),s()},methods:{onLogin:function(){var t=this;this.mobile||this.$toast("手机号不能为空");if(!/^[01][3456789][0-9]{9}/.test(this.mobile))return this.$toast("手机号格式错误"),!1;this.password||this.$toast("请输入密码"),this.util.request({url:"wmall/auth/login",method:"POST",data:{mobile:this.mobile,password:this.password}}).then(function(e){var s=e.data.message;if(s.errno)return t.util.$toast(s.message,"",1e3),!1;s=s.message,t.util.setStorage("itoken",s.member.token);var i=window.redirct_url;(!i||i&&-1!=i.path.indexOf("pages/auth/login"))&&(i={path:"/pages/home/index"}),t.$router.replace(a.a.getUrl(i))})},onLoad:function(){var t=this;this.util.request({url:"wmall/auth/login"}).then(function(e){var s=e.data.message;if(s.errno)return t.util.$toast(s.message,"",1e3),!1;t.config=s.message.config_mall})}},mounted:function(){this.$nextTick(function(){}),this.onLoad()}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"login"}},[s("div",{staticClass:"content"},[s("div",{staticClass:"header"},[s("div",{staticClass:"logo"},[t.config.logo?s("img",{attrs:{src:t.config.logo,alt:""}}):s("img",{attrs:{src:"static/img/head.png",alt:""}})]),t._v(" "),s("div",{staticClass:"name"},[t._v(t._s(t.config.title))])]),t._v(" "),s("div",{staticClass:"list-block"},[s("van-cell-group",[s("van-field",{attrs:{"left-icon":"phone1",type:"number",placeholder:"请输入手机号"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),s("van-field",{attrs:{"left-icon":"lock",type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),s("router-link",{staticClass:"list-password",attrs:{to:t.util.getUrl({path:"/pages/auth/forget"})}},[t._v("忘记密码"),s("van-icon",{attrs:{name:"right"}})],1),t._v(" "),s("div",{staticClass:"content-padded"},[s("div",{staticClass:"button-login",on:{click:t.onLogin}},[t._v("登陆")])])],1),t._v(" "),s("div",{staticClass:"text"},[s("p",[t._v("还没有账号？"),s("router-link",{staticClass:"text-a",attrs:{to:t.util.getUrl({path:"/pages/auth/register"})}},[t._v("立即注册")])],1)])])])},staticRenderFns:[]};var n=s("VU/8")(i,o,!1,function(t){s("cLa/")},null,null);e.default=n.exports},"cLa/":function(t,e){}});
//# sourceMappingURL=17.06ffad1375b1d935c8b3.js.map
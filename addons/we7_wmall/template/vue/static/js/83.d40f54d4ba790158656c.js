webpackJsonp([83],{"C6/7":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"pay",components:{PublicHeader:s("Cz8s").a},data:function(){return{showPreLoading:!0,order_type:"takeout",slides:[],order:{},payment:[],paytype:"wechat",member:{},submitDisabled:!1}},methods:{onLoad:function(){var t=this;this.util.request({url:"system/paycenter/pay",method:"POST",data:{sid:this.sid,id:this.order_id,order_type:this.order_type,type:1}}).then(function(e){t.showPreLoading=!1;var s=e.data.message;if(s.errno)return t.$toast(s.message),!1;t.slides=s.message.slides,t.payment=s.message.payment,t.order=s.message.order,t.member=s.message.member})},onSelectPayType:function(t){this.paytype=t,"credit"==this.paytype?(this.member.credit2||(this.member.credit2=0),this.order.fee>this.member.credit2&&(this.submitDisabled=!0)):this.submitDisabled=!1},onSubmit:function(){this.paytype||this.$toast("请先选择支付方式"),this.submitDisabled=!0,this.util.pay({pay_type:this.paytype,order_type:this.order_type,order_id:this.order_id,vue:this})}},mounted:function(){this.onLoad()},created:function(){this.query=this.$route.query,this.query&&(this.order_id=this.query.order_id,this.order_type=this.query.order_type)}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"pay"}},[s("div",{staticClass:"content"},[t.slides&&t.slides.length>0?s("van-swipe",{staticClass:"swiper",attrs:{autoplay:3e3}},t._l(t.slides,function(t,e){return s("van-swipe-item",{key:e},[s("img",{attrs:{src:t.thumb,alt:""}})])})):t._e(),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"order-summary flex-lr"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:t.order.logo,alt:""}})]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"fee"},[s("span",{staticClass:"underline"},[t._v("¥"+t._s(t.order.fee))])]),t._v(" "),s("div",{staticClass:"order-info"},[s("span",{staticClass:"underline"},[t._v(t._s(t.order.title))])])])]),t._v(" "),s("div",{staticClass:"bolck-title"},[t._v("选择支付方式")]),t._v(" "),s("div",{staticClass:"pay-list"},[t._l(t.payment,function(e,i){return[s("div",{staticClass:"pay-item van-hairline--bottom flex-lr",on:{click:function(s){t.onSelectPayType(e.value)}}},[s("div",{staticClass:"item-inner flex"},["wechat"==e.value?s("img",{attrs:{src:"static/img/wx-icon.png",alt:""}}):"alipay"==e.value?s("img",{attrs:{src:"static/img/zfb-icon.png",alt:""}}):"credit"==e.value?s("img",{attrs:{src:"static/img/money-icon.png",alt:""}}):"delivery"==e.value?s("img",{attrs:{src:"static/img/delivery-icon.png",alt:""}}):t._e(),t._v(" "),s("div",{staticClass:"item-box"},[s("div",{staticClass:"item-title"},[t._v(t._s(e.title))]),t._v(" "),"wechat"==e.value?s("div",{staticClass:"item-subtitle flex"},[s("span",{staticClass:"pay-recommend"},[t._v("推荐使用")]),t._v("\n\t\t\t\t\t\t\t\t\t微信支付,安全快捷\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),"alipay"==e.value?s("div",{staticClass:"item-subtitle flex"},[s("span",{staticClass:"pay-recommend"},[t._v("推荐使用")]),t._v("\n\t\t\t\t\t\t\t\t\t简单、安全、快速\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),"credit"==e.value?s("div",{staticClass:"item-subtitle flex"},[t._v("\n\t\t\t\t\t\t\t\t\t当前账户余额:\n\t\t\t\t\t\t\t\t\t"),s("span",{staticClass:"money"},[t._v(" ¥"+t._s(t.member.credit2||0))])]):t._e(),t._v(" "),"delivery"==e.value?s("div",{staticClass:"item-subtitle flex"},[t._v("\n\t\t\t\t\t\t\t\t\t线下当面交易，到店付款，货到付款\n\t\t\t\t\t\t\t\t")]):t._e()])]),t._v(" "),s("i",{staticClass:"icon",class:{"icon-check":e.value==t.paytype}})])]})],2)],1),t._v(" "),s("div",{staticClass:"save-btn"},[s("van-button",{attrs:{type:"default",size:"large",disabled:t.submitDisabled},on:{click:t.onSubmit}},[t._v("确认支付 ¥"+t._s(t.order.fee))])],1),t._v(" "),s("transition",{attrs:{name:"loading"}},[t.showPreLoading?s("iloading"):t._e()],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"remain-time hide"},[s("div",[t._v("支付剩余时间")]),t._v(" "),s("div",{staticClass:"in-clock"},[s("span",{staticClass:"in-num",attrs:{id:"minute_0"}},[t._v("2")]),t._v(" "),s("span",{staticClass:"in-num",attrs:{id:"minute_1"}},[t._v("3")]),t._v(" "),s("span",{staticClass:"in-colon"},[t._v(":")]),t._v(" "),s("span",{staticClass:"in-num",attrs:{id:"second_0"}},[t._v("0")]),t._v(" "),s("span",{staticClass:"in-num",attrs:{id:"second_1"}},[t._v("1")])])])}]};var r=s("VU/8")(i,a,!1,function(t){s("sZec")},null,null);e.default=r.exports},sZec:function(t,e){}});
//# sourceMappingURL=83.d40f54d4ba790158656c.js.map
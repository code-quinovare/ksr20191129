webpackJsonp([90],{"7asO":function(t,e){},UyNZ:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{goods_id:Number,goods:{},islegal:!1,username:"",mobile:""}},components:{PublicHeader:s("Cz8s").a},methods:{onLoad:function(){var t=this;this.util.request({url:"creditshop/order/create",data:{goods_id:this.goods_id}}).then(function(e){var s=e.data.message;if(s.errno)return t.util.$toast(s.message),!1;t.goods=s.message,t.islegal=!0})},onSubmit:function(){var t=this;if("goods"==this.goods.type){if(!this.username)return this.util.$toast("请输入姓名"),!1;if(!this.mobile)return this.util.$toast("请输入联系方式"),!1}if(!this.islegal)return!1;this.islegal=!1,this.util.request({url:"creditshop/order/submit",data:{goods_id:this.goods_id,username:this.username,mobile:this.mobile}}).then(function(e){var s=e.data.message;if(s.errno)return t.util.$toast(s.message),!1;var i=s.message.order_id,o="/pages/creditshop/detail?id="+i;"pay"==s.message.redirect?(o="/pages/public/pay?order_id="+i+"&order_type=creditshop",t.$router.push(o)):t.util.$toast("兑换成功",o)})}},created:function(){if(!this.$route.query.goods_id)return this.util.$toast("参数错误"),!1;this.goods_id=this.$route.query.goods_id},mounted:function(){this.onLoad()}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"creditshop-create"}},[s("public-header",{attrs:{title:"订单确认"}}),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"main"},[s("div",{staticClass:"order-food-region"},[t._m(0),t._v(" "),s("div",{staticClass:"food-list"},[s("div",{staticClass:"food-item-img"},[s("img",{attrs:{src:t.goods.thumb,alt:""}})]),t._v(" "),s("div",{staticClass:"food-item-price"},[s("div",{staticClass:"now-price"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.goods.use_credit1)+"积分\n\t\t\t\t\t\t\t"),t.goods.use_credit2>0?[t._v("\n\t\t\t\t\t\t\t\t+ ¥"+t._s(t.goods.use_credit1)+"\n\t\t\t\t\t\t\t")]:t._e()],2),t._v(" "),s("div",{staticClass:"old-price"},[t._v("¥"+t._s(t.goods.old_price))])]),t._v(" "),s("div",{staticClass:"food-item-info"},[s("div",{staticClass:"food-item-name"},[t._v(t._s(t.goods.title))]),t._v(" "),s("div",{staticClass:"food-item-num"},[t._v("x1")])])])]),t._v(" "),"goods"==t.goods.type?s("div",{staticClass:"order-region"},[s("div",{staticClass:"order-region-entries"},[s("div",[t._v("姓名")]),t._v(" "),s("div",{staticClass:"order-pay-type"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username,expression:"username",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"请输入您的名字"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"order-region-entries"},[s("div",[t._v("联系方式")]),t._v(" "),s("div",{staticClass:"order-pay-type"},[s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.mobile,expression:"mobile",modifiers:{number:!0}}],attrs:{type:"text",placeholder:"请输入您的联系方式"},domProps:{value:t.mobile},on:{input:function(e){e.target.composing||(t.mobile=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])])]):t._e()])]),t._v(" "),s("van-submit-bar",{attrs:{disabled:!t.islegal,"button-text":"提交订单"},on:{submit:t.onSubmit}},[s("div",{staticClass:"order-total-field",attrs:{slot:"default"},slot:"default"},[t._v("\n\t\t\t待支付\n\t\t\t"),s("div",{staticClass:"order-total"},[t._v("\n\t\t\t\t"+t._s(t.goods.use_credit1)+"积分\n\t\t\t\t"),t.goods.use_credit2>0?[t._v("\n\t\t\t\t\t+ ¥"+t._s(t.goods.use_credit2)+"\n\t\t\t\t")]:t._e()],2)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"order-food-title"},[e("div",{staticClass:"food-shop"},[this._v("商品信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"divide"},[e("div",{staticClass:"divide-line"})])}]};var r=s("VU/8")(i,o,!1,function(t){s("7asO")},null,null);e.default=r.exports}});
//# sourceMappingURL=90.8aaec29cda380c666139.js.map
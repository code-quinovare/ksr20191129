{itemplate 'public/header'}
<link href="../addons/we7_wmall/plugin/errander/static/css/web/diy.web.css" rel="stylesheet" type="text/css"/>
{if $op == 'list'}
<div class="clearfix">
	<div class="app-preview">
		<div class="app-header"></div>
		<div class="app-body">
			<div class="title" id="page">新建自定义页面</div>
			<div class="main" id="app-preview">
			</div>
		</div>
		<div class="app-footer"></div>
	</div>
	<div class="app-editor form-horizontal" id="app-editor">
		<div class="editor-arrow"></div>
		<div class="inner">
		</div>
	</div>
</div>
<div class="app-action">
	<div class="parts" id="parts"></div>
	<div class="action">
		<nav class="btn btn-default btn-sm pull-left" id="gotop">返回顶部</nav>
		<nav class="btn btn-primary btn-sm btn-save">保存并设置</nav>
	</div>
</div>


<script type="text/html" id="tpl-show-fees">
	<div class="drag" data-itemid="<(itemid)>">
		<p>7985464</p>
	</div>
</script>

<script type="text/html" id="tpl-parts">
	<nav class="btn btn-link" data-id="page"><i class="fa fa-cog"></i> 页面设置</nav>
	<(each initPart as part)>
	<nav class="btn btn-link" data-id="<(part.id)>"><i class="fa fa-plus"></i> <(part.name)></nav>
	<(/each)>
</script>
<script type="text/html" id="tpl-editor-del">
	<div class="btn-edit-del">
		<div class="btn-edit">编辑</div>
		<div class="btn-del">删除</div>
	</div>
</script>
<script type="text/html" id="tpl-editor-page">
	<div class="form-group">
		<div class="col-sm-2 control-label">页面名称</div>
		<div class="col-sm-10">
			<input class="form-control input-sm diy-bind" data-bind="name" data-placeholder="请输入名称" placeholder="请输入名称" value="<(page.name)>" />
			<div class="help-block">注意：页面名称是便于后台查找，页面标题是手机端标题。</div>
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-2 control-label">页面标题</div>
		<div class="col-sm-10">
			<input class="form-control input-sm diy-bind" data-bind="title" data-placeholder="请输入标题" placeholder="请输入标题" value="<(page.title)>" />
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-2 control-label">页面介绍</div>
		<div class="col-sm-10">
			<textarea class="form-control richtext diy-bind" cols="70" rows="3" placeholder="请输入页面介绍" data-bind="desc" data-placeholder=""><(page.desc)></textarea>
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-2 control-label">背景颜色</div>
		<div class="col-sm-4">
			<div class="input-group input-group-sm">
				<input class="form-control input-sm diy-bind color" data-bind="background" value="<(page.background)>" type="color" />
				<span class="input-group-addon btn btn-default" onclick="$(this).prev().val('#efeff4').trigger('propertychange')">重置</span>
			</div>
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-2 control-label">导航栏背景色</div>
		<div class="col-sm-4">
			<div class="input-group input-group-sm">
				<input class="form-control input-sm diy-bind color" data-bind="navigationbackground" value="<(page.navigationbackground)>" type="color" />
				<span class="input-group-addon btn btn-default" onclick="$(this).prev().val('#000').trigger('propertychange')">重置</span>
			</div>
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-2 control-label">导航栏字体颜色</div>
		<div class="col-sm-4">
			<div class="input-group input-group-sm">
				<label class="radio-inline"><input type="radio" name="navigationtextcolor" value="#000000" class="diy-bind" data-bind="navigationtextcolor" <(if page.navigationtextcolor=='#000000' || !page.navigationtextcolor)>checked="checked"<(/if)> > 黑</label>
				<label class="radio-inline"><input type="radio" name="navigationtextcolor" value="#ffffff" class="diy-bind" data-bind="navigationtextcolor" <(if page.navigationtextcolor=='#ffffff')>checked="checked"<(/if)>> 白</label>
			</div>
		</div>
	</div>
	<!--	<div class="form-group">
			<div class="col-sm-2 control-label">关注条</div>
			<div class="col-sm-10">
				<label class="radio-inline"><input type="radio" name="followbar" value="0" class="diy-bind" data-bind="followbar" <(if page.followbar=='0' || !page.followbar)>checked="checked"<(/if)> > 不显示</label>
				<label class="radio-inline"><input type="radio" name="followbar" value="1" class="diy-bind" data-bind="followbar" <(if page.followbar=='1')>checked="checked"<(/if)>> 显示</label>
			</div>
		</div>
		<div class="form-group">
			<div class="col-sm-2 control-label">下单提醒</div>
			<div class="col-sm-10">
				<label class="radio-inline"><input type="radio" name="danmu" value="0" class="diy-bind" data-bind="danmu" <(if page.danmu=='0' || !page.danmu)>checked="checked"<(/if)> > 不显示</label>
				<label class="radio-inline"><input type="radio" name="danmu" value="1" class="diy-bind" data-bind="danmu" <(if page.danmu=='1')>checked="checked"<(/if)>> 显示</label>
				<div class="help-block">提示：设置请至 <a href="{php echo iurl('diypage/danmu')}" target="_blank">下单提醒</a> 中设置 未设置则不显示</div>
			</div>
		</div>-->
</script>
<script type="text/html" id="tpl-editor-fees">
	<div class="form-group">
		<div class="col-sm-2 control-label">距离计价</div>
		<div class="col-sm-10" style="background: red">
			<label class="radio-inline"><input type="radio" name="fee_mode_main" value="1" class="diy-bind" data-bind="fee_mode_main" data-bind-child="params" <(if params.fee_mode_main=='1' || !params.fee_type)>checked="checked"<(/if)> > 里程计价</label>
			<label class="radio-inline"><input type="radio" name="fee_mode_main" value="2" class="diy-bind" data-bind="fee_mode_main" data-bind-child="params" <(if params.fee_mode_main=='2')>checked="checked"<(/if)>> 区间计价</label>
			<span class="help-block"></span>
		</div>
	</div>
	<div class="form-items" data-min="" data-max="" data-type="">
		<div class="inner" id="form-items">
			<div class="item" data-id="<(itemid)>">
				<span class="btn-del del-item" title="删除"></span>
				<div class="item-body">
					<div class="item-form">
						<div class="hour clockpicker">
							<div class="form-group">
								<div class="col-sm-6">
									<div class="input-group">
										<input type="text" readonly class="form-control input-sm diy-bind" data-bind-child="redpackets" data-bind-parent="" data-bind="times" data-bind-category="" data-bind-type="start_hour" value="">
										<span class="input-group-addon border-0-lr">至</span>
										<input type="text" readonly class="form-control input-sm diy-bind" data-bind-child="redpackets" data-bind-parent="" data-bind="times" data-bind-category="" data-bind-type="end_hour" value="">
									</div>
								</div>
							</div>
						</div>
						<div class="input-group">
							<span class="input-group-addon">起价</span>
							<input type="text" class="form-control input-sm diy-bind" value="" data-bind-parent="" data-bind-child="" data-bind=""/>
							<span class="input-group-addon border-0-lr">km内</span>
							<input type="text" class="form-control input-sm diy-bind"  value="" data-bind-parent="" data-bind-child="" data-bind="" />
							<span class="input-group-addon border-0-lr">元，每增</span>
							<input type="text" class="form-control input-sm diy-bind" value="" data-bind-parent="" data-bind-child="" data-bind=""/>
							<span class="input-group-addon border-0-lr">km加</span>
							<input type="text" class="form-control input-sm diy-bind"  value="" data-bind-parent="" data-bind-child="" data-bind="" />
							<span class="input-group-addon">元超过</span>
						</div>
						<div class="input-group">
							<input type="text" class="form-control input-sm diy-bind"  value="" data-bind-parent="" data-bind-child="" data-bind="" />
							<span class="input-group-addon border-0-lr">km，每增</span>
							<input type="text" class="form-control input-sm diy-bind" value="" data-bind-parent="" data-bind-child="" data-bind=""/>
							<span class="input-group-addon border-0-lr">km加</span>
							<input type="text" class="form-control input-sm diy-bind"  value="" data-bind-parent="" data-bind-child="" data-bind="" />
							<span class="input-group-addon">元</span>
						</div>
					</div>
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-2 control-label">
					<a href="javascript:;" class="btn btn-default btn-sm hour-add" id="addchild"><i class="fa fa-plus-circle"></i> 添加时间段</a>
				</div>
			</div>
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-2 control-label">重量计价</div>
		<div class="col-sm-10">
			<label class="radio-inline"><input type="radio" name="fee_mode_weiht" value="0" class="diy-bind" data-bind="fee_mode_weiht" data-bind-child="params" <(if params.fee_mode_weiht=='0' || !params.fee_mode_weiht)>checked="checked"<(/if)> > 关闭</label>
			<label class="radio-inline"><input type="radio" name="fee_mode_weiht" value="1" class="diy-bind" data-bind="fee_mode_weiht" data-bind-child="params" <(if params.fee_mode_weiht=='1')>checked="checked"<(/if)>> 开启</label>
			<span class="help-block"></span>
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-2 control-label">预设费用</div>
		<div class="col-sm-10">
			<label class="radio-inline"><input type="radio" name="fee_mode_self" value="0" class="diy-bind" data-bind="fee_mode_self" data-bind-child="params" <(if params.fee_mode_self=='0' || !params.fee_mode_self)>checked="checked"<(/if)> > 关闭</label>
			<label class="radio-inline"><input type="radio" name="fee_mode_self" value="1" class="diy-bind" data-bind="fee_mode_self" data-bind-child="params" <(if params.fee_mode_self=='1')>checked="checked"<(/if)>> 开启</label>
			<span class="help-block"></span>
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-2 control-label">附加费用</div>
		<div class="col-sm-10">
			<label class="radio-inline"><input type="radio" name="fee_mode_extra" value="1" class="diy-bind" data-bind="fee_mode_extra" data-bind-child="params" <(if params.fee_mode_extra=='1' || !params.fee_mode_extra)>checked="checked"<(/if)> > 选择附加</label>
			<label class="radio-inline"><input type="radio" name="fee_mode_extra" value="2" class="diy-bind" data-bind="fee_mode_extra" data-bind-child="params" <(if params.fee_mode_extra=='2')>checked="checked"<(/if)>> 时段附加</label>
		</div>
	</div>
	<div class="form-group">
		<div class="col-sm-2 control-label">支付方式</div>
		<div class="col-sm-6">
			<div class="input-group">
				<label class="radio-inline"><input type="checkbox" name="fee_paytype" value="wechat" class="diy-bind" data-bind="fee_paytype" data-bind-child="params" <(if params.fee_paytype=='wechat')>checked="checked"<(/if)> > 微信</label>
				<label class="radio-inline"><input type="checkbox" name="fee_paytype" value="credit" class="diy-bind" data-bind="fee_paytype" data-bind-child="params" <(if params.fee_paytype=='credit')>checked="checked"<(/if)>> 余额</label>
				<label class="radio-inline"><input type="checkbox" name="fee_paytype" value="alipay" class="diy-bind" data-bind="fee_paytype" data-bind-child="params" <(if params.fee_paytype=='alipay')>checked="checked"<(/if)>> 支付宝</label>
			</div>
		</div>
	</div>
</script>

<script type="text/javascript" src="./resource/components/ueditor/ueditor.config.js"></script>
<script type="text/javascript" src="./resource/components/ueditor/ueditor.all.min.js"></script>
<script type="text/javascript" src="./resource/components/ueditor/lang/zh-cn/zh-cn.js"></script>
<script language="javascript">
	var path = '../../plugin/errander/static/js/diycaretory';
	irequire([path, 'tmodtpl'],function(diy, tmodtpl){
		diy.init({
			tmodtpl: tmodtpl,
			attachurl: "{$_W['attachurl']}",
			id: '{php echo intval($_GPC["id"])}',
			type: 0,
			data: {if !empty($page['data'])}{php echo json_encode($page['data'])}{else}null{/if},
			diymenu: {php echo json_encode($diymenus)},
			mallset: {}
		});
	});

	function callbackGoods(data) {
		irequire([path],function(diy) {
			diy.callbackGoods(data);
		});
	}

	function callbackStore(data) {
		irequire([path],function(diy) {
			console.dir(data)
			diy.callbackStore(data);
		});
	}
</script>
{/if}
{itemplate 'public/footer'}

      <div class="panel-body">
		<hr/>下面是站长设置专区(只有站长可见,各公众号独立设置)<hr/>
      	<div class="form-group clearfix">
          <label class="control-label col-md-2">公众号生成密码</label>
          <div class="col-md-4">
				<select id="common_corp" class="form-control input-medium" name="isccode">
                    <option value="0" {if $settings['isccode']==0}selected{/if}>关闭(只有站长能生成)</option>
                    <option value="1" {if $settings['isccode']==1}selected{/if}>公众号管理员能生成</option>
					<option value="2" {if $settings['isccode']==2}selected{/if}>公众号操作员也能生成</option>
				</select>
			 <div class="help-block">这个设置主要在运营商是否开放密码生成给用户</div>
          </div>
          <label class="control-label col-md-2">手机端模板</label>
          <div class="col-md-4">
				<select id="common_corp" class="form-control input-medium" name="wapcss">
					{loop $dirs $dir}
						<option value="{$dir}" {if $settings['wapcss'] == $dir}selected{/if}>{$dir}</option>
					{/loop}	
				</select>
			 <div class="help-block">只有站长能设置(可为每个客户个性化设计模板)</div>
          </div>
        </div>
      	<div class="form-group clearfix">
          <label class="control-label col-md-2">API接口授权IP</label>
          <div class="col-md-4">
			<input type="text" class="form-control" name="api[ip]" placeholder="此项不设，API就关闭" value="{$settings['api']['ip']}" >
			 <div class="help-block">只能处理该IP传来的数据</div>
          </div>
          <label class="control-label col-md-2">API通信密钥</label>
          <div class="col-md-4">
				<div class="input-group form-group" style="text-align:left;">
					<input type="text" class="form-control" id="apikey"  name="api[key]" placeholder="此项不设，API就关闭" value="{$settings['api']['key']}" >					
					<span class="input-group-addon js-clip" style="cursor:pointer" onclick="oCopy('apikey');" title="点击复制密钥"><i class="fa fa-copy"></i></span>
					<span class="input-group-addon js-clip" style="cursor:pointer"  onclick="funkey();" title="点击随机生成接口密钥"><i class="fa fa-recycle"></i></span>
				</div>
			 <div class="help-block">数据传输过程鉴权专用,<a href='{php echo $this->createWebUrl('help')}'>请到这里查看开发文档</a></div>
          </div>
        </div>
    </div>
<script>
function randomkey(randomFlag, min, max){ 
    var str = "", 
        range = min, 
        arr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']; 
    if(randomFlag){ 
        range = Math.round(Math.random() * (max-min)) + min; 
    } 
    for(var i=0; i<range; i++){ 
        pos = Math.round(Math.random() * (arr.length-1)); 
        str += arr[pos]; 
    } 
    return str; 
}
function funkey(){ 
    str = randomkey(1, 32, 32); 
    document.getElementById("apikey").value = str; 
}
</script>
	